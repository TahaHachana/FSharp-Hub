(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;$.Define($$,{Website:{BooksAdmin:{Client:{addFormlet:$.Field(function(){var G,H,I,K,L,M,O,P,Q,R,S,U,V,W,Y,Z,_0,_2,_3,_4,_6,_7,_8,_,ba,bb,bd,be,bf;G=(H=c.Input(""),(I=function(J){return d.WithTextLabel("URL",J);},I(H)));K=(L=c.Input(""),(M=function(N){return d.WithTextLabel("Title",N);},M(L)));O=(P=(Q=(R=c.Input(""),(S=function(T){return d.WithTextLabel("Author",T);},S(R))),d.Many(Q)),d.WithFormContainer(P));U=(V=c.Input(""),(W=function(X){return d.WithTextLabel("Publisher",X);},W(V)));Y=(Z=c.Input(""),(_0=function(_1){return d.WithTextLabel("ISBN",_1);},_0(Z)));_2=(_3=c.Input(""),(_4=function(_5){return d.WithTextLabel("Pages",_5);},_4(_3)));_6=(_7=c.Input(""),(_8=function(_9){return d.WithTextLabel("Release Date",_9);},_8(_7)));_=(ba=c.Input(""),(bb=function(bc){return d.WithTextLabel("Cover URL",bc);},bb(ba)));bd=(be=(bf=e.$(e.$(e.$(e.$(e.$(e.$(e.$(e.$(f.Return(function(bg){return function(bh){return function(bi){return function(bj){return function(bk){return function(bl){return function(bm){return function(bn){return[bg,bh,bi,bj,bk,bl,bm,bn];};};};};};};};}),G),K),O),U),Y),_2),_6),_),d.WithSubmitAndResetButtons(bf)),d.WithFormContainer(be));return f.Run($.Tupled(function(bn){var bo,bp,bq,br,bs,bt,bu,bv,bw,bx,bC;bo=bn[0];bp=bn[1];bq=bn[2];br=bn[3];bs=bn[4];bt=bn[5];bu=bn[6];bv=bn[7];bw=g.Delay((bx=function(){var bz,bA;bz=h.Async("Sitelet:6",[bo,bp,bq,br,bs,bt,bu,bv]);bA=function(bB){if(bB){i("New book inserted successfully.");return g.Return(null);}else{i("The query failed.");return g.Return(null);}};return g.Bind(bz,bA);},bx));bC={$:0};return g.Start(bw);}),bd);}),main:function(){return k.add(l.Div(m.ofArray([l.Attr().Class("row")])),m.ofArray([l.Div(m.ofArray([l.H1(m.ofArray([l.Text("Add new book")])),l.Div(m.ofArray([p.addFormlet()]))]))]));},tr:function(bD,bE){return l.TR(m.ofArray([l.TD(m.ofArray([l.Text(bD)])),l.TD(m.ofArray([l.Text(bE)]))]));}},Control:$.Class({get_Body:function(){return p.main();}})},Login:{Client:{loginForm:function(bF){var bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,b5,b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;bG=l.Input(m.ofArray([l.Attr().Class("form-control"),(bH=l.Attr(),bH.NewAttr("id","username")),(bI=l.Attr(),bI.NewAttr("type","text")),(bJ=q.Attr(),bJ.NewAttr("autofocus","autofocus"))]));bK=(bL=(bM=l.Button(m.ofArray([l.Attr().Class("btn btn-primary btn-block"),(bN=l.Attr(),bN.NewAttr("id","login-btn")),(bO=l.Attr(),bO.NewAttr("type","button"))])),(bP=l.Text("Submit"),k.add(bM,m.ofArray([bP])))),(bQ=(bR=function(){return function(){var bU,bV,b1;bU=(bV=function(){var bX,bY,bZ;bX={Name:bG.get_Value(),Password:s.passInput().get_Value()};bY=h.Async("Sitelet:4",[bX]);bZ=function(b0){if(b0.$==1){t.location.assign(bF);return g.Return(null);}else{i("Login failed");return g.Return(null);}};return g.Bind(bY,bZ);},g.Delay(bV));b1=function(b2){var b3;b3={$:0};return g.Start(b2);};return b1(bU);};},function(b4){return u.Events().OnClick(bR,b4);}),(bQ(bL),bL)));return k.add(l.Form(m.ofArray([l.Attr().NewAttr("role","form"),(b5=l.Attr(),b5.NewAttr("id","signin"))])),m.ofArray([l.H2(m.ofArray([l.Text("Please sign in")])),k.add((b6=m.ofArray([l.Attr().Class("form-group")]),(b7=l.Tags(),b7.NewTag("fieldset",b6))),m.ofArray([(b8=m.ofArray([l.Text("Username"),(b9=l.Attr(),b9.NewAttr("for","username"))]),(b_=l.Tags(),b_.NewTag("label",b8))),bG,(b$=m.ofArray([l.Text("Password"),(ca=l.Attr(),ca.NewAttr("for","password"))]),(cb=l.Tags(),cb.NewTag("label",b$))),s.passInput()])),(cc=m.ofArray([bK]),(cd=l.Tags(),cd.NewTag("fieldset",cc)))]));},passInput:$.Field(function(){var ce,cf,cg,ch,ci;ce=l.Input(m.ofArray([l.Attr().Class("form-control"),(cf=l.Attr(),cf.NewAttr("id","password")),(cg=l.Attr(),cg.NewAttr("type","password"))]));ch=(ci=function(){return function(ck){var cl;cl=ck.KeyCode;if(cl===13){return v("#login-btn").click();}else{return null;}};},function(cm){return u.Events().OnKeyDown(ci,cm);});ch(ce);return ce;})},Control:$.Class({get_Body:function(){return s.loginForm(this.redirectUrl);}})},Questions:{Client:{displayQuestions:function(cn,co){var cp,cq,cr,cB;cp=l.UL(m.ofArray([l.Attr().Class("list-group"),l.Id("questions-list")]));cq=(cr=function(cs){var ct;ct=$.Tupled(function(cu){var cv,cw,cx,cy,cz;cv=cu[0];cw=cu[1];cx=cu[2];cy=cu[3];cz=cu[4];return x.li(cv,cw,cx,cy,cz);});return cs.map(function(cA){return ct(cA);});},cr(cn));cB=function(cC){var cD;cD=function(cE){return cp.AppendI(cE);};return cC.forEach(function(cF){cD(cF);});};cB(cq);return co.AppendI(cp);},li:function(cG,cH,cI,cJ,cK){var cL,cM,cN,cO,cP;return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(cG),(cL=l.Attr(),cL.NewAttr("target","_blank"))])),m.ofArray([(cM=m.ofArray([l.Text(cH)]),(cN=l.Tags(),cN.NewTag("strong",cM)))])),l.Br($.New(y,{$:0})),(cO=m.ofArray([l.Text(cI+", "+cJ)]),(cP=l.Tags(),cP.NewTag("small",cO))),l.P(m.ofArray([l.Text(cK)]))]));},main:function(){var cQ,cR;cQ=l.Div(m.ofArray([l.Attr().Class("home-widget")]));cR=function(cS){return k.OnAfterRender(function(cT){var cU,cV,c1;cU=(cV=function(){var cX,cY;cX=h.Async("Sitelet:3",[]);cY=function(cZ){var c0;if(cZ.$==1){c0=cZ.$0;x.displayQuestions(c0,cT);return g.Return(null);}else{return g.Return(null);}};return g.Bind(cX,cY);},g.Delay(cV));c1=function(c2){var c3;c3={$:0};return g.Start(c2);};return c1(cU);},cS);};cR(cQ);return cQ;}},Control:$.Class({get_Body:function(){return x.main();}})},Snippets:{Client:{dispalySnippets:function(c4,c5){var c6,c7,c8,de;c6=l.UL(m.ofArray([l.Attr().Class("list-group")]));c7=(c8=function(c9){var c_;c_=$.Tupled(function(c$){var da,db,dc;da=c$[0];db=c$[1];dc=c$[2];return A.li(da,db,dc);});return c9.map(function(dd){return c_(dd);});},c8(c4));de=function(df){var dg;dg=function(dh){return c6.AppendI(dh);};return df.forEach(function(di){dg(di);});};de(c7);return c5.AppendI(c6);},li:function(dj,dk,dl){var dm,dn,_do;return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dj),(dm=l.Attr(),dm.NewAttr("target","_blank"))])),m.ofArray([(dn=m.ofArray([l.Text(dk)]),(_do=l.Tags(),_do.NewTag("strong",dn)))])),l.P(m.ofArray([l.Text(dl)]))]));},main:function(){var dp,dq;dp=l.Div(m.ofArray([l.Attr().Class("home-widget")]));dq=function(dr){return k.OnAfterRender(function(ds){var dt,du,dA;dt=(du=function(){var dw,dx;dw=h.Async("Sitelet:2",[]);dx=function(dy){var dz;if(dy.$==1){dz=dy.$0;A.dispalySnippets(dz,ds);return g.Return(null);}else{return g.Return(null);}};return g.Bind(dw,dx);},g.Delay(du));dA=function(dB){var dC;dC={$:0};return g.Start(dB);};return dA(dt);},dr);};dq(dp);return dp;}},Control:$.Class({get_Body:function(){return A.main();}})},Tweets:{Client:{handleTweetActions:function(){var dD;dD=v("a.tweet-action");return dD.click(function(dE){var dF,dG;dE.preventDefault();dF=this.getAttribute("href");dG=t.showModalDialog(dF);dG;});},li:function(dH){var dI,dJ,dK,dL,dM,dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW;dI=dH.Id;dJ=dH.Name;dK=dH.ScreenName;dL="https://twitter.com/"+dK;dM="https://twitter.com/intent/tweet?in_reply_to="+dI;dN="https://twitter.com/intent/retweet?tweet_id="+dI;dO="https://twitter.com/intent/favorite?tweet_id="+dI;dP=l.P($.New(y,{$:0}));dP.set_Html(dH.Html);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([l.Div(m.ofArray([k.add(k.add(l.A(m.ofArray([l.HRef(dL),l.Attr().Class("profile-link"),(dQ=l.Attr(),dQ.NewAttr("target","_blank"))])),m.ofArray([l.Img(m.ofArray([l.Src(dH.Avatar),l.Alt(dJ),l.Attr().Class("avatar")])),(dR=m.ofArray([l.Text(dJ)]),(dS=l.Tags(),dS.NewTag("strong",dR)))])),m.ofArray([l.Text(" @"+dK)])),l.Br($.New(y,{$:0})),(dT=m.ofArray([l.Text(dH.Date)]),(dU=l.Tags(),dU.NewTag("small",dT))),dP,k.add(l.Div(m.ofArray([l.Attr().Class("tweet-actions")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dM),l.Attr().Class("tweet-action"),(dV=l.Attr(),dV.NewAttr("style","margin-right: 5px;"))])),m.ofArray([l.Text("Reply")])),k.add(l.A(m.ofArray([l.HRef(dN),l.Attr().Class("tweet-action"),(dW=l.Attr(),dW.NewAttr("style","margin-right: 5px;"))])),m.ofArray([l.Text("Retweet")])),k.add(l.A(m.ofArray([l.HRef(dO),l.Attr().Class("tweet-action")])),m.ofArray([l.Text("Favorite")]))]))]))]));},main:function(){var dX,dY;dX=l.Div(m.ofArray([l.Attr().Class("home-widget")]));dY=function(dZ){return k.OnAfterRender(function(d0){var d1,d2,ec;d1=(d2=function(){var d4,d5;d4=h.Async("Sitelet:1",[]);d5=function(d6){var d7,d8,d9,d_,d$;if(d6.$==1){d7=d6.$0;d8=l.UL(m.ofArray([l.Attr().Class("list-group"),(d9=l.Attr(),d9.NewAttr("id","tweets-ul"))]));d_=(d$=function(ea){return d8.AppendI(C.li(ea));},function(eb){return D.iter(d$,eb);});d_(d7);d0.AppendI(d8);C.toggleActionsVisibility();C.handleTweetActions();return g.Return(null);}else{i("Failed to fetch the latest tweets.");return g.Return(null);}};return g.Bind(d4,d5);},g.Delay(d2));ec=function(ed){var ee;ee={$:0};return g.Start(ed);};return ec(d1);},dZ);};dY(dX);return dX;},toggleActionsVisibility:function(){var ef;ef=v(".list-group-item");ef.mouseenter(function(){return v(".tweet-actions",this).css("visibility","visible");});return ef.mouseleave(function(){return v(".tweet-actions",this).css("visibility","hidden");});}},Control:$.Class({get_Body:function(){return C.main();}})},VideosAdmin:{Client:{main:function(){var ei,ej,ek,em,en,eo,eq,er,es,eu,ev,ew,ey,ez,eA,eC,eD,eE;ei=(ej=c.Input(""),(ek=function(el){return d.WithTextLabel("Title",el);},ek(ej)));em=(en=c.Input(""),(eo=function(ep){return d.WithTextLabel("URL",ep);},eo(en)));eq=(er=c.Input(""),(es=function(et){return d.WithTextLabel("Thumbnail",et);},es(er)));eu=(ev=c.Input(""),(ew=function(ex){return d.WithTextLabel("Website",ex);},ew(ev)));ey=(ez=c.Input(""),(eA=function(eB){return d.WithTextLabel("Date",eB);},eA(ez)));eC=(eD=(eE=e.$(e.$(e.$(e.$(e.$(f.Return(function(eF){return function(eG){return function(eH){return function(eI){return function(eJ){return[eF,eG,eH,eI,eJ];};};};};}),ei),em),eq),eu),ey),d.WithSubmitAndResetButtons(eE)),d.WithFormContainer(eD));return f.Run($.Tupled(function(eK){var eL,eM,eN,eO,eP,eQ,eR,eW;eL=eK[0];eM=eK[1];eN=eK[2];eO=eK[3];eP=eK[4];eQ=g.Delay((eR=function(){var eT,eU;eT=h.Async("Sitelet:0",[eL,eM,eN,eO,eP]);eU=function(eV){if(eV){i("New video inserted successfully.");return g.Return(null);}else{i("The query failed.");return g.Return(null);}};return g.Bind(eT,eU);},eR));eW={$:0};return g.Start(eQ);}),eC);}},Control:$.Class({get_Body:function(){return F.main();}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Controls);d=$.Safe(b.Enhance);e=$.Safe(b.Data);f=$.Safe(b.Formlet);g=$.Safe(a.Concurrency);h=$.Safe(a.Remoting);i=$.Safe($$.alert);j=$.Safe(a.Html);k=$.Safe(j.Operators);l=$.Safe(j.Default);m=$.Safe(a.List);n=$.Safe($$.Website);o=$.Safe(n.BooksAdmin);p=$.Safe(o.Client);q=$.Safe(l.HTML5);r=$.Safe(n.Login);s=$.Safe(r.Client);t=$.Safe($$.window);u=$.Safe(j.EventsPervasives);v=$.Safe($$.jQuery);w=$.Safe(n.Questions);x=$.Safe(w.Client);y=$.Safe(m.T);z=$.Safe(n.Snippets);A=$.Safe(z.Client);B=$.Safe(n.Tweets);C=$.Safe(B.Client);D=$.Safe(a.Seq);E=$.Safe(n.VideosAdmin);return F=$.Safe(E.Client);});$.OnLoad(function(){s.passInput();p.addFormlet();});}());
