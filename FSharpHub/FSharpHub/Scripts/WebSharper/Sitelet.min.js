(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;$.Define($$,{Website:{BooksAdmin:{Client:{addFormlet:$.Field(function(){var H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,_7,_8;H=c.Input("");I=d.WithTextLabel("URL",H);J=c.Input("");K=d.WithTextLabel("Title",J);L=d.WithTextLabel("Author",c.Input(""));M=d.Many(L);N=d.WithFormContainer(M);O=c.Input("");P=d.WithTextLabel("Publisher",O);Q=c.Input("");R=d.WithTextLabel("ISBN",Q);S=c.Input("");T=d.WithTextLabel("Pages",S);U=c.Input("");V=d.WithTextLabel("Release Date",U);W=c.Input("");X=d.WithTextLabel("Cover URL",W);Y=e.$(e.$(e.$(e.$(e.$(e.$(e.$(e.$(f.Return(function(Z){return function(_0){return function(_1){return function(_2){return function(_3){return function(_4){return function(_5){return function(_6){return[Z,_0,_1,_2,_3,_4,_5,_6];};};};};};};};}),I),K),N),P),R),T),V),X);_7=d.WithSubmitAndResetButtons(Y);_8=d.WithFormContainer(_7);return f.Run($.Tupled(function(_9){var _,ba,bb,bc,bd,be,bf,bg;_=_9[0];ba=_9[1];bb=_9[2];bc=_9[3];bd=_9[4];be=_9[5];bf=_9[6];bg=_9[7];return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:6",[_,ba,bb,bc,bd,be,bf,bg]),function(bi){if(bi){i("New book inserted successfully.");return g.Return(null);}else{i("The query failed.");return g.Return(null);}});}));}),_8);}),main:function(){return k.add(l.Div(m.ofArray([l.Attr().Class("row")])),m.ofArray([l.Div(m.ofArray([l.H1(m.ofArray([l.Text("Add new book")])),l.Div(m.ofArray([p.addFormlet()]))]))]));},tr:function(bi,bj){return l.TR(m.ofArray([l.TD(m.ofArray([l.Text(bi)])),l.TD(m.ofArray([l.Text(bj)]))]));}},Control:$.Class({get_Body:function(){return p.main();}})},Login:{Client:{loginForm:function(bk){var bl,bm,bn,bs,bt,bu,bv,bw;bl=l.Input(m.ofArray([l.Attr().Class("form-control"),l.Attr().NewAttr("id","username"),l.Attr().NewAttr("type","text"),q.Attr().NewAttr("autofocus","autofocus")]));bm=k.add(l.Button(m.ofArray([l.Attr().Class("btn btn-primary btn-block"),l.Attr().NewAttr("id","login-btn"),l.Attr().NewAttr("type","button")])),m.ofArray([l.Text("Submit")]));bn=function(){return function(){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:4",[{Name:bl.get_Value(),Password:s.passInput().get_Value()}]),function(br){if(br.$==1){t.location.assign(bk);return g.Return(null);}else{i("Login failed");return g.Return(null);}});}));};};u.Events().OnClick(bn,bm);bs=bm;bt=m.ofArray([l.Attr().Class("form-group")]);bu=m.ofArray([l.Text("Username"),l.Attr().NewAttr("for","username")]);bv=m.ofArray([l.Text("Password"),l.Attr().NewAttr("for","password")]);bw=m.ofArray([bs]);return k.add(l.Form(m.ofArray([l.Attr().NewAttr("role","form"),l.Attr().NewAttr("id","signin")])),m.ofArray([l.H2(m.ofArray([l.Text("Please sign in")])),k.add(l.Tags().NewTag("fieldset",bt),m.ofArray([l.Tags().NewTag("label",bu),bl,l.Tags().NewTag("label",bv),s.passInput()])),l.Tags().NewTag("fieldset",bw)]));},passInput:$.Field(function(){var bx,by;bx=l.Input(m.ofArray([l.Attr().Class("form-control"),l.Attr().NewAttr("id","password"),l.Attr().NewAttr("type","password")]));by=function(){return function(bA){return bA.KeyCode===13?v("#login-btn").click():null;};};u.Events().OnKeyDown(by,bx);return bx;})},Control:$.Class({get_Body:function(){return s.loginForm(this.redirectUrl);}})},Questions:{Client:{displayQuestions:function(bB,bC){var bD;bD=l.UL(m.ofArray([l.Attr().Class("list-group"),l.Id("questions-list")]));w.iter(function(bE){return bD.AppendI(bE);},w.map($.Tupled(function(bF){return y.li(bF[0],bF[1],bF[2],bF[3],bF[4]);}),bB));return bC.AppendI(bD);},li:function(bG,bH,bI,bJ,bK){var bL,bM;bL=m.ofArray([l.Text(bH)]);bM=m.ofArray([l.Text(bI+", "+bJ)]);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(bG),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Tags().NewTag("strong",bL)])),l.Br($.New(z,{$:0})),l.Tags().NewTag("small",bM),l.P(m.ofArray([l.Text(bK)]))]));},main:function(){var bN;bN=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(bO){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:3",[]),function(bQ){if(bQ.$==1){y.displayQuestions(bQ.$0,bO);return g.Return(null);}else{return g.Return(null);}});}));},bN);return bN;}},Control:$.Class({get_Body:function(){return y.main();}})},Snippets:{Client:{dispalySnippets:function(bR,bS){var bT;bT=l.UL(m.ofArray([l.Attr().Class("list-group")]));w.iter(function(bU){return bT.AppendI(bU);},w.map($.Tupled(function(bV){return B.li(bV[0],bV[1],bV[2]);}),bR));return bS.AppendI(bT);},li:function(bW,bX,bY){var bZ;bZ=m.ofArray([l.Text(bX)]);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(bW),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Tags().NewTag("strong",bZ)])),l.P(m.ofArray([l.Text(bY)]))]));},main:function(){var b0;b0=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(b1){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:2",[]),function(b3){if(b3.$==1){B.dispalySnippets(b3.$0,b1);return g.Return(null);}else{return g.Return(null);}});}));},b0);return b0;}},Control:$.Class({get_Body:function(){return B.main();}})},Tweets:{Client:{handleTweetActions:function(){return v("a.tweet-action").click(function(b4){b4.preventDefault();t.showModalDialog(this.getAttribute("href"));return;});},li:function(b5){var b6,b7,b8,b9,b_,b$,ca,cb,cc,cd;b6=b5.Id;b7=b5.Name;b8=b5.ScreenName;b9="https://twitter.com/"+b8;b_="https://twitter.com/intent/tweet?in_reply_to="+b6;b$="https://twitter.com/intent/retweet?tweet_id="+b6;ca="https://twitter.com/intent/favorite?tweet_id="+b6;cb=l.P($.New(z,{$:0}));cb.set_Html(b5.Html);cc=m.ofArray([l.Text(b7)]);cd=m.ofArray([l.Text(b5.Date)]);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([l.Div(m.ofArray([k.add(k.add(l.A(m.ofArray([l.HRef(b9),l.Attr().Class("profile-link"),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Src(b5.Avatar),l.Alt(b7),l.Attr().Class("avatar")])),l.Tags().NewTag("strong",cc)])),m.ofArray([l.Text(" @"+b8)])),l.Br($.New(z,{$:0})),l.Tags().NewTag("small",cd),cb,k.add(l.Div(m.ofArray([l.Attr().Class("tweet-actions")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(b_),l.Attr().Class("tweet-action"),l.Attr().NewAttr("style","margin-right: 5px;")])),m.ofArray([l.Text("Reply")])),k.add(l.A(m.ofArray([l.HRef(b$),l.Attr().Class("tweet-action"),l.Attr().NewAttr("style","margin-right: 5px;")])),m.ofArray([l.Text("Retweet")])),k.add(l.A(m.ofArray([l.HRef(ca),l.Attr().Class("tweet-action")])),m.ofArray([l.Text("Favorite")]))]))]))]));},main:function(){var ce;ce=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(cf){return g.Start(g.Delay(function(){var ch;ch=h.Async("Sitelet:1",[]);return g.Bind(ch,function(ci){var cj,ck;if(ci.$==1){cj=ci.$0;ck=l.UL(m.ofArray([l.Attr().Class("list-group"),l.Attr().NewAttr("id","tweets-ul")]));C.iter(function(cl){return ck.AppendI(E.li(cl));},cj);cf.AppendI(ck);E.toggleActionsVisibility();E.handleTweetActions();return g.Return(null);}else{i("Failed to fetch the latest tweets.");return g.Return(null);}});}));},ce);return ce;},toggleActionsVisibility:function(){var cm;cm=v(".list-group-item");cm.mouseenter(function(){return v(".tweet-actions",this).css("visibility","visible");});return cm.mouseleave(function(){return v(".tweet-actions",this).css("visibility","hidden");});}},Control:$.Class({get_Body:function(){return E.main();}})},VideosAdmin:{Client:{main:function(){var cp,cq,cr,cs,ct,cu,cv,cw,cx,cy,cz,cF,cG;cp=c.Input("");cq=d.WithTextLabel("Title",cp);cr=c.Input("");cs=d.WithTextLabel("URL",cr);ct=c.Input("");cu=d.WithTextLabel("Thumbnail",ct);cv=c.Input("");cw=d.WithTextLabel("Website",cv);cx=c.Input("");cy=d.WithTextLabel("Date",cx);cz=e.$(e.$(e.$(e.$(e.$(f.Return(function(cA){return function(cB){return function(cC){return function(cD){return function(cE){return[cA,cB,cC,cD,cE];};};};};}),cq),cs),cu),cw),cy);cF=d.WithSubmitAndResetButtons(cz);cG=d.WithFormContainer(cF);return f.Run($.Tupled(function(cH){var cI,cJ,cK,cL,cM;cI=cH[0];cJ=cH[1];cK=cH[2];cL=cH[3];cM=cH[4];return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:0",[cI,cJ,cK,cL,cM]),function(cO){if(cO){i("New video inserted successfully.");return g.Return(null);}else{i("The query failed.");return g.Return(null);}});}));}),cG);}},Control:$.Class({get_Body:function(){return G.main();}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Controls);d=$.Safe(b.Enhance);e=$.Safe(b.Data);f=$.Safe(b.Formlet);g=$.Safe(a.Concurrency);h=$.Safe(a.Remoting);i=$.Safe($$.alert);j=$.Safe(a.Html);k=$.Safe(j.Operators);l=$.Safe(j.Default);m=$.Safe(a.List);n=$.Safe($$.Website);o=$.Safe(n.BooksAdmin);p=$.Safe(o.Client);q=$.Safe(l.HTML5);r=$.Safe(n.Login);s=$.Safe(r.Client);t=$.Safe($$.window);u=$.Safe(j.EventsPervasives);v=$.Safe($$.jQuery);w=$.Safe(a.Arrays);x=$.Safe(n.Questions);y=$.Safe(x.Client);z=$.Safe(m.T);A=$.Safe(n.Snippets);B=$.Safe(A.Client);C=$.Safe(a.Seq);D=$.Safe(n.Tweets);E=$.Safe(D.Client);F=$.Safe(n.VideosAdmin);return G=$.Safe(F.Client);});$.OnLoad(function(){s.passInput();p.addFormlet();return;});}());
