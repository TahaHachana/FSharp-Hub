(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0;$.Define($$,{IntelliFactory:{WebSharper:{Formlet:{Body:$.Class({},{New:function(_1,_2){return $.New(c,{Element:_1,Label:_2});}}),Controls:{Button:function(_3){return d.ElementButton(function(){return f.Button(g.ofArray([f.Text(_3)]));});},Checkbox:function(_5){return d.CheckboxControl(false,_5);},CheckboxControl:function(_6,_7){return h.MkFormlet(function(){var _9,_,ba,bb,bc,bd,be,bf,bo,bp,bs,bt,bv;_9=j.New($.New(m,{$:0,$0:_7}));_=(ba=_6?g.ofArray([(bb=f.Attr(),bb.NewAttr("disabled","disabled"))]):$.New(n,{$:0}),(bc=o.add(f.Input(g.ofArray([(bd=f.Attr(),bd.NewAttr("type","checkbox")),f.Attr().Class("inputCheckbox")])),ba),(be=(bf=function(bg){return function(){var bi,bj,bk,bm;if(!_6){bi=(bj=p(bg.Body).prop("checked"),(bk=function(bl){return $.New(m,{$:0,$0:bl});},bk(bj)));bm=function(bn){return _9.Trigger(bn);};return bm(bi);}else{return null;}};},function(bn){return q.Events().OnClick(bf,bn);}),(be(bc),bc))));if(_7){bo=_["HtmlProvider@32"];((bp=_.Body,function(bq){return function(br){return bo.SetAttribute(bp,bq,br);};})("defaultChecked"))("true");}else{bs=_["HtmlProvider@32"];(bt=_.Body,function(bu){return bs.RemoveAttribute(bt,bu);})("checked");}bv=function(){var bx,by,bB,bC,bE,bF;if(_7){bx=_["HtmlProvider@32"];((by=_.Body,function(bz){return function(bA){return bx.SetProperty(by,bz,bA);};})("checked"))(true);}else{bB=_["HtmlProvider@32"];(bC=_.Body,function(bD){return bB.RemoveAttribute(bC,bD);})("checked");bE=_["HtmlProvider@32"];((bF=_.Body,function(bG){return function(bH){return bE.SetProperty(bF,bG,bH);};})("checked"))(false);}return _9.Trigger($.New(m,{$:0,$0:_7}));};bv(null);return[_,bv,_9];});},CheckboxGroup:function(bI){return d.CheckboxGroupControl(false,bI);},CheckboxGroupControl:function(bJ,bK){var bL,bM,bN,bO,b7,b8,b9;bL=(bM=(bN=(bO=$.Tupled(function(bP){var bQ,bR,bS,bT,bU,bV,bW,bX,b2,b3;bQ=bP[0];bR=bP[1];bS=bP[2];bT=(bU=d.CheckboxControl(bJ,bS),(bV=(bW=(bX=function(){var bZ,b0;bZ=g.ofArray([f.Text(bQ)]);b0=f.Tags();return b0.NewTag("label",bZ);},{$:1,$0:bX}),function(b1){return r.WithLabel(bW,b1);}),bV(bU)));b2=(b3=function(b4){return[b4,bR];},function(b5){return r.Map(b3,b5);});return b2(bT);}),function(b6){return g.map(bO,b6);}),bN(bK)),r.Sequence(bM));b7=(b8=(b9=$.Tupled(function(b_){var b$,ca;b$=b_[0];ca=b_[1];if(b$){return{$:1,$0:ca};}else{return{$:0};}}),function(cb){return g.choose(b9,cb);}),function(cc){return r.Map(b8,cc);});return b7(bL);},ElementButton:function(cd){return h.MkFormlet(function(){var cf,cg,ch,ci,cj,ck,co;cf=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));cg={contents:0};ch=(ci=cd(null),(cj=(ck=function(){return function(){cf.Trigger($.New(m,{$:0,$0:cg.contents}));return s.Increment(cg);};},function(cn){return q.Events().OnClick(ck,cn);}),(cj(ci),ci)));co=function(){cg.contents=0;return cf.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};return[ch,co,cf];});},Input:function(cq){return d.InputField(false,"text",t.InputTextClass(),cq);},InputControl:function(cr,cs){return h.MkFormlet(function(){var cu,cv,cw;cu=j.New($.New(m,{$:0,$0:cr}));cv=cs(cu);cv.set_Value(cr);cw=function(){cv.set_Value(cr);return cu.Trigger($.New(m,{$:0,$0:cr}));};return[cv,cw,cu];});},InputField:function(cy,cz,cA,cB){return d.InputControl(cB,function(cC){var cD,cE,cF,cG,cH;cD=(cE=cy?g.ofArray([(cF=f.Attr(),cF.NewAttr("readonly","readonly"))]):$.New(n,{$:0}),f.Input(g.append(g.ofArray([(cG=f.Attr(),cG.NewAttr("type",cz)),f.Attr().Class(cA)]),cE)));cH=function(cI){return d.OnTextChange(function(){if(!cy){return cC.Trigger($.New(m,{$:0,$0:cD.get_Value()}));}else{return null;}},cI);};cH(cD);return cD;});},OnTextChange:function(cK,cL){var cM,cN;cM={contents:cL.get_Value()};cN=function(){if(cL.get_Value()!==cM.contents){cM.contents=cL.get_Value();return cK(null);}else{return null;}};q.Events().OnChange(function(){return cN(null);},cL);q.Events().OnKeyUp(function(){return function(){return cN(null);};},cL);cL.Body.oninput=cN;},Password:function(cS){return d.InputField(false,"password","inputPassword",cS);},RadioButtonGroup:function(cT,cU){return d.RadioButtonGroupControl(false,cT,cU);},RadioButtonGroupControl:function(cV,cW,cX){return r.New(function(){var cZ,c0,c1,c2,c3,c4,c5,c$,da,dg,dh,di,dl,dm,dn,dw,dM,dW,dX,dY,dZ,d0,d1,ef,eh,ej;cZ="id"+u.round(u.random()*100000000);c0=(c1=cW.$==0?{$:0}:(c2=cW.$0,(c3=(c4=(c5=function(c6){return $.Tupled(function(c7){var c8,c9;c8=c7[0];c9=c7[1];return[c6,c9];});},function(c_){return g.mapi(c5,c_);}),c4(cX)),(c$=(da=$.Tupled(function(db){var dc,dd,de;dc=db[0];dd=db[1];if(cW.$==0){return{$:0};}else{de=cW.$0;if(de===dc){return{$:1,$0:$.New(m,{$:0,$0:dd})};}else{return{$:0};}}}),function(df){return v.tryPick(da,df);}),c$(c3)))),(dg=(dh=j.New($.New(m,{$:1,$0:$.New(n,{$:0})})),(di=function(dj){return j.New(dj);},function(dk){return w.Maybe(dh,di,dk);})),dg(c1)));dl=(dm=(dn=$.Tupled(function(_do){var dp,dq,dr,ds,dt,du;dp=_do[0];dq=_do[1];dr=o.add(f.Input(g.ofArray([f.Attr().Class("inputRadio"),(ds=f.Attr(),ds.NewAttr("type","radio")),(dt=f.Attr(),dt.NewAttr("name",cZ))])),cV?g.ofArray([(du=f.Attr(),du.NewAttr("disabled","disabled"))]):$.New(n,{$:0}));return[dr,dp,dq];}),function(dv){return g.map(dn,dv);}),dm(cX));dw=function(dx,dy,dz){var dA,dB,dD,dE,dF,dI,dJ;if(cW.$==0){dA=dx["HtmlProvider@32"];(dB=dx.Body,function(dC){return dA.RemoveAttribute(dB,dC);})("checked");return c0.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));}else{dD=cW.$0;if(dD===dz){dE=dx["HtmlProvider@32"];((dF=dx.Body,function(dG){return function(dH){return dE.SetProperty(dF,dG,dH);};})("checked"))(true);return c0.Trigger($.New(m,{$:0,$0:dy}));}else{dI=dx["HtmlProvider@32"];return((dJ=dx.Body,function(dK){return function(dL){return dI.SetProperty(dJ,dK,dL);};})("checked"))(false);}}};dM=function(){var dO,dP;dO=(dP=function(dQ){return $.Tupled(function(dR){var dS,dT,dU;dS=dR[0];dT=dR[1];dU=dR[2];return dw(dS,dU,dQ);});},function(dV){return v.iteri(dP,dV);});return dO(dl);};dW=(dX=(dY=(dZ=(d0=(d1=function(d2){return $.Tupled(function(d3){var d4,d5,d6,d7,d8,ea;d4=d3[0];d5=d3[1];d6=d3[2];dw(d4,d6,d2);d7=(d8=function(){return function(){if(!cV){return c0.Trigger($.New(m,{$:0,$0:d6}));}else{return null;}};},function(d$){return q.Events().OnClick(d8,d$);});d7(d4);ea={$:1,$0:function(){var ec,ed;ec=g.ofArray([f.Text(d5)]);ed=f.Tags();return ed.NewTag("label",ec);}};return $.New(c,{Element:d4,Label:ea});});},function(ee){return g.mapi(d1,ee);}),d0(dl)),(ef=function(eg){return x.FromSequence(eg);},ef(dZ))),(eh=function(ei){return $.New(y,{$:0,$0:ei});},eh(dY))),(ej=function(ek){return h.RX().Return(ek);},ej(dX)));return $.New(z,{Body:dW,Dispose1:function(el){el;},Notify:function(){return dM(null);},State:c0});});},ReadOnlyCheckbox:function(en){return d.CheckboxControl(true,en);},ReadOnlyInput:function(eo){return d.InputField(true,"text",t.InputTextClass(),eo);},ReadOnlyRadioButtonGroup:function(ep,eq){return d.RadioButtonGroupControl(true,ep,eq);},ReadOnlySelect:function(er,es){return d.SelectControl(true,er,es);},ReadOnlyTextArea:function(et){return d.TextAreaControl(true,et);},Select:function(eu,ev){return d.SelectControl(false,eu,ev);},SelectControl:function(ew,ex,ey){return h.MkFormlet(function(){var eA,eB,eC,eD,eG,eI,eJ,eK,eL,eM,eN,eX,eZ,e0,e1,e2,e9,e_;eA=(eB=(eC=(eD=$.Tupled(function(eE){return eE[1];}),function(eF){return g.map(eD,eF);}),eC(ey)),(eG=function(eH){return A.ofSeq(eH);},eG(eB)));eI=(ex>=0?ex<ey.get_Length():false)?ex:0;eJ=(eK=(eL=(eM=(eN=function(eO){return $.Tupled(function(eP){var eQ,eR,eS,eT,eU,eV;eQ=eP[0];eR=eP[1];eS=f.Tags();eT=g.ofArray([f.Text(eQ),(eU=f.Attr(),(eV=$$.String(eO),eU.NewAttr("value",eV)))]);return eS.NewTag("option",eT);});},function(eW){return g.mapi(eN,eW);}),eM(ey)),(eX=function(eY){return f.Select(eY);},eX(eL))),ew?o.add(eK,g.ofArray([(eZ=f.Attr(),eZ.NewAttr("disabled","disabled"))])):eK);e0=$.New(m,{$:0,$0:eA[eI]});e1=j.New(e0);e2=function(){var e4,e5,e6;e4=$$.String(eI);e5=eJ["HtmlProvider@32"];((e6=eJ.Body,function(e7){return function(e8){return e5.SetProperty(e6,e7,e8);};})("value"))(e4);return e1.Trigger(e0);};e2(null);e9=(e_=function(){var fa,fb,fc,fd,ff;if(!ew){fa=eJ.get_Value();fb=(fc=eA[fa<<0],(fd=function(fe){return $.New(m,{$:0,$0:fe});},fd(fc)));ff=function(fg){return e1.Trigger(fg);};return ff(fb);}else{return null;}},function(fh){return q.Events().OnChange(e_,fh);});e9(eJ);e2(null);return[eJ,e2,e1];});},TextArea:function(fi){return d.TextAreaControl(false,fi);},TextAreaControl:function(fj,fk){return d.InputControl(fk,function(fl){var fm,fn,fo,fp;fm=(fn=fj?g.ofArray([(fo=f.Attr(),fo.NewAttr("readonly","readonly"))]):$.New(n,{$:0}),f.TextArea(fn));fp=function(fq){return d.OnTextChange(function(){if(!fj){return fl.Trigger($.New(m,{$:0,$0:fm.get_Value()}));}else{return null;}},fq);};fp(fm);return fm;});}},CssConstants:{InputTextClass:$.Field(function(){return"inputText";})},Data:{$:function(fs,ft){var fu,fv;fu=(fv=h.BaseFormlet(),fv.Apply(fs,ft));return h.OfIFormlet(fu);},BaseFormlet:function(){return B.New(h.UtilsProvider());},DefaultLayout:$.Field(function(){return h.Layout().get_Vertical();}),Formlet:$.Class({Build:function(){return this.BuildInternal.call(null,null);},MapResult:function(fw){var fx,fA=this;fx=$.New(C,{BuildInternal:function(){var fz,fB,fC;fz=fA.BuildInternal.call(null,null);return $.New(z,{Body:fz.Body,Dispose1:fz.Dispose1,Notify:fz.Notify,State:(fB=fA.Utils.Reactive,(fC=fz.State,function(fD){return fB.Select(fC,fD);})(fw))});},LayoutInternal:fA.LayoutInternal,ElementInternal:{$:0},FormletBase:fA.FormletBase,Utils:fA.Utils});return fx;},Render:function(){return this.Run(function(fE){fE;}).Render();},Run:function(fF){var fG,fH,fI,fJ,fM,fN,fO,fP,fQ,fR;fG=this.ElementInternal;if(fG.$==0){fH=this.FormletBase.ApplyLayout(this);fI=fH.Build();fJ=D.subscribeTo(fI.State,function(fK){var fL;fL=m.Map(fF,fK);fL;});fJ;fM=(fN=fH.get_Layout().Apply.call(null,fI.Body),fN.$==0?(fO=h.DefaultLayout().Apply.call(null,fI.Body).$0,(fP=fO[0],fP.Element)):(fQ=fN.$0[0],fQ.Element));this.ElementInternal={$:1,$0:fM};return fM;}else{fR=fG.$0;return fR;}},get_Body:function(){return this.Run(function(fS){fS;}).get_Body();},get_Layout:function(){return this.LayoutInternal;}}),Layout:$.Field(function(){return E.New(F.New({Reactive:G.Default()}));}),MkFormlet:function(fT){var fU,fV;fU=(fV=h.BaseFormlet(),fV.New(function(){var fX,fY,fZ,f0,f1,f3,f4,f5,f7;fX=fT(null);fY=fX[2];fZ=fX[1];f0=fX[0];f1=function(){return fZ(null);};return $.New(z,{Body:(f3=(f4=h.NewBody(f0,{$:0}),(f5=function(f6){return x.Set(f6);},f5(f4))),(f7=function(f8){return h.RX().Return(f8);},f7(f3))),Dispose1:function(){return null;},Notify:f1,State:fY});}));return h.OfIFormlet(fU);},NewBody:function(f_,f$){return c.New(f_,f$);},OfIFormlet:function(ga){var gb;gb=$.New(C,{BuildInternal:function(){return ga.Build();},LayoutInternal:ga.get_Layout(),ElementInternal:{$:0},FormletBase:h.BaseFormlet(),Utils:h.UtilsProvider()});return h.PropagateRenderFrom(ga,gb);},PropagateRenderFrom:function(gd,ge){if(gd.hasOwnProperty("Render")){ge.Render=gd.Render;}return ge;},RX:$.Field(function(){return G.Default();}),UtilsProvider:function(){return{Reactive:h.RX(),DefaultLayout:h.DefaultLayout()};},Validator:$.Field(function(){return H.New(I.New());}),ValidatorProvidor:$.Class({Matches:function(gf,gg){return gg.match(new J(gf));}},{New:function(){var gh;gh=$.New(this,{});return gh;}})},ElementStore:$.Class({Init:function(){this.store=L.New21();},RegisterElement:function(gi,gj){var gk;if(gk=this.store.ContainsKey(gi),!gk){return this.store.set_Item(gi,gj);}else{return null;}},Remove:function(gl){var gm;if(this.store.ContainsKey(gl)){(this.store.get_Item(gl))(null);gm=this.store.Remove(gl);gm;}else{return null;}}},{New:function(){var gn;gn=$.New(this,{});return gn;},NewElementStore:function(){var go;go=M.New();go.Init();return go;}}),Enhance:{Cancel:function(gp,gq){return r.Replace(gp,function(gr){if(gq(gr)){return r.Empty();}else{return r.Return(gr);}});},CustomMany:function(gs,gt){var gu,gv,gx,gz,gA,gB,gC,gD,gF,gI,gJ,gL,gM,gN,gO,gQ,gS,gT,g9;gu=(gv=d.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(gs.AddIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));}),(gx=function(gy){return r.InitWith(1,gy);},gx(gv)));gz=(gA=(gB=(gC=(gD=d.ElementButton(function(){return o.add(f.Div(g.ofArray([f.Attr().Class(gs.RemoveIconClass)])),g.ofArray([f.Div($.New(n,{$:0}))]));}),(gF=function(gG){return r.Map(function(gH){gH;},gG);},gF(gD))),r.WithCancelation(gt,gC)),(gI=(gJ=h.Layout().get_Horizontal(),function(gK){return r.WithLayout(gJ,gK);}),gI(gB))),N.Deletable(gA));gL=j.New($.New(m,{$:0,$0:null}));gM=(gN=h.BaseFormlet().FromState(gL),(gO=function(gP){return h.OfIFormlet(gP);},gO(gN)));gQ=function(){return gL.Trigger($.New(m,{$:0,$0:null}));};gS=(gT=r.Do(),gT.Delay(function(){return gT.Bind(gM,function(){return gT.ReturnFrom(function(){var gX,gY,gZ,g1,g2,g5,g7;gX=(gY=(gZ=N.Many_(gu,function(){return gz;}),(g1=(g2=function(g3){return g.ofSeq(g3);},function(g4){return r.Map(g2,g4);}),g1(gZ))),(g5=function(g6){return r.WithLayoutOrDefault(g6);},g5(gY)));g7=function(g8){return r.ApplyLayout(g8);};return g7(gX);}(null));});}));g9=function(g_){return r.WithNotification(gQ,g_);};return g9(gS);},Deletable:function(g$){return N.Replace(g$,function(ha){var hb;if(ha.$==1){hb=ha.$0;return r.Return({$:1,$0:hb});}else{return r.ReturnEmpty({$:0});}});},FormButtonConfiguration:$.Class({},{get_Default:function(){return $.New(O,{Label:{$:0},Style:{$:0},Class:{$:0}});}}),FormContainerConfiguration:$.Class({},{get_Default:function(){var hc;hc={$:0};return $.New(P,{Header:{$:0},Padding:Q.get_Default(),Description:hc,BackgroundColor:{$:0},BorderColor:{$:0},CssClass:{$:0},Style:{$:0}});}}),InputButton:function(hd,he){return h.MkFormlet(function(){var hg,hh,hi,hj,hl,hm,hn,ho,hp,hq,hu,hv,hx,hy,hz,hA,hC,hD,hE,hF,hH;hg=j.New($.New(m,{$:1,$0:$.New(n,{$:0})}));hh={contents:0};hi=(hj=w.Maybe("Submit",function(hk){return hk;},hd.Label),(hl=(hm=o.add(f.Input(g.ofArray([(hn=f.Attr(),hn.NewAttr("type","button"))])),g.ofArray([f.Attr().Class("submitButton"),(ho=f.Attr(),ho.NewAttr("value",hj))])),(hp=(hq=function(){return function(){s.Increment(hh);return hg.Trigger($.New(m,{$:0,$0:hh.contents}));};},function(ht){return q.Events().OnClick(hq,ht);}),(hp(hm),hm))),(!he?(hu=hl["HtmlProvider@32"],(hv=hl.Body,function(hw){return hu.AddClass(hv,hw);})("disabledButton")):null,(hx=hd.Style,hx.$==1?(hy=hx.$0,(hz=hl["HtmlProvider@32"],(hA=hl.Body,function(hB){return hz.SetStyle(hA,hB);})(hy))):null,(hC=hd.Class,hC.$==1?(hD=hC.$0,(hE=hl["HtmlProvider@32"],(hF=hl.Body,function(hG){return hE.AddClass(hF,hG);})(hD))):null,hl)))));hH=function(){hh.contents=0;return hg.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));};hg.Trigger($.New(m,{$:1,$0:$.New(n,{$:0})}));return[hi,hH,hg];});},Many:function(hJ){return N.CustomMany(R.get_Default(),hJ);},ManyConfiguration:$.Class({},{get_Default:function(){return $.New(R,{AddIconClass:"addIcon",RemoveIconClass:"removeIcon"});}}),Many_:function(hK,hL){var hM,hN,hO,hP,hQ,hS,hT;hM=(hN=(hO=(hP=(hQ=hL,function(hR){return r.Map(hQ,hR);}),hP(hK)),r.SelectMany(hO)),r.FlipBody(hN));hS=(hT=function(hU){return v.choose(function(hV){return hV;},hU);},function(hW){return r.Map(hT,hW);});return hS(hM);},Padding:$.Class({},{get_Default:function(){return $.New(Q,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}}),Replace:function(hX,hY){var hZ,h0;return r.Switch((hZ=(h0=function(h1){var h2,h3,h4;if(h1.$==1){h2=h1.$0;h3=r.FailWith(h2);return $.New(m,{$:0,$0:h3});}else{h4=h1.$0;return $.New(m,{$:0,$0:hY(h4)});}},function(h5){return r.MapResult(h0,h5);}),hZ(hX)));},ValidationFrameConfiguration:$.Class({},{get_Default:function(){return $.New(S,{ValidClass:{$:1,$0:"successFormlet"},ValidStyle:{$:0},ErrorClass:{$:1,$0:"errorFormlet"},ErrorStyle:{$:0}});}}),ValidationIconConfiguration:$.Class({},{get_Default:function(){return $.New(T,{ValidIconClass:"validIcon",ErrorIconClass:"errorIcon"});}}),WithCssClass:function(h6,h7){var h8,h9;h8=(h9=function(h_){var h$,ia;h$=h_["HtmlProvider@32"];(ia=h_.Body,function(ib){return h$.AddClass(ia,ib);})(h6);return h_;},function(ic){return r.MapElement(h9,ic);});return h8(h7);},WithCustomFormContainer:function(id,ie){var _if,ig,ii;_if=(ig=function(ih){return r.ApplyLayout(ih);},ig(ie));ii=function(ij){return r.MapElement(function(ik){var il,im,_in,io,ip,iu,iv,iw,ix,iy,iF,iG,iH,iI,iP,iQ,iR,iS,iV,iW,iX,i0,i1,i2,i5,i6,i7,i_,i$,ja,jd,je,jo,jp,jq,jr,jt,ju,jv,jw;il=(im=id.Description,(_in=(io=$.New(n,{$:0}),(ip=function(iq){var ir,is;if(iq.$==1){ir=iq.$0;return g.ofArray([ir(null)]);}else{is=iq.$0;return g.ofArray([f.P(g.ofArray([f.Tags().text(is)]))]);}},function(it){return w.Maybe(io,ip,it);})),_in(im)));iu=(iv=id.Header,(iw=(ix=w.InTable(g.ofArray([g.ofArray([o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),il)]),g.ofArray([ik])])),(iy=function(iz){var iA,iB,iC,iD;iA=(iB=iz.$==1?(iC=iz.$0,iC(null)):(iD=iz.$0,f.H1(g.ofArray([f.Tags().text(iD)]))),o.add(f.Div(g.ofArray([f.Attr().Class("headerPanel")])),$.New(n,{$:1,$0:iB,$1:il})));return w.InTable(g.ofArray([g.ofArray([iA]),g.ofArray([ik])]));},function(iE){return w.Maybe(ix,iy,iE);})),iw(iv)));iF=o.add(f.TD(g.ofArray([f.Attr().Class("formlet")])),g.ofArray([iu]));iG=id.BorderColor;iH=(iI=function(iJ){var iK,iL,iM;iK="border-color: "+iJ;iL=iF["HtmlProvider@32"];return(iM=iF.Body,function(iN){return iL.SetStyle(iM,iN);})(iK);},function(iO){return w.Maybe(null,iI,iO);});iH(iG);iP=g.ofArray([["background-color",(iQ=id.BackgroundColor,(iR=(iS=function(iT){return iT;},function(iU){return w.MapOption(iS,iU);}),iR(iQ)))],["padding-left",(iV=id.Padding.Left,(iW=(iX=function(iY){return $$.String(iY)+"px";},function(iZ){return w.MapOption(iX,iZ);}),iW(iV)))],["padding-right",(i0=id.Padding.Right,(i1=(i2=function(i3){return $$.String(i3)+"px";},function(i4){return w.MapOption(i2,i4);}),i1(i0)))],["padding-top",(i5=id.Padding.Top,(i6=(i7=function(i8){return $$.String(i8)+"px";},function(i9){return w.MapOption(i7,i9);}),i6(i5)))],["padding-bottom",(i_=id.Padding.Bottom,(i$=(ja=function(jb){return $$.String(jb)+"px";},function(jc){return w.MapOption(ja,jc);}),i$(i_)))]]);jd=(je=$.Tupled(function(jf){var jg,jh,ji,jj,jk;jg=jf[0];jh=jf[1];if(jh.$==0){return null;}else{ji=jh.$0;jj=iF["HtmlProvider@32"];return((jk=iF.Body,function(jl){return function(jm){return jj.SetCss(jk,jl,jm);};})(jg))(ji);}}),function(jn){return v.iter(je,jn);});jd(iP);jo=id.Style;if(jo.$==0){}else{jp=jo.$0;jq=iF["HtmlProvider@32"];(jr=iF.Body,function(js){return jq.SetStyle(jr,js);})(jp);}jt=id.CssClass;if(jt.$==0){}else{ju=jt.$0;jv=iF["HtmlProvider@32"];(jw=iF.Body,function(jx){return jv.AddClass(jw,jx);})(ju);}return f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([iF]))]))]));},ij);};return ii(_if);},WithCustomResetButton:function(jy,jz){var jA,jB,jC;jA=(jB=jy.Label,jB.$==0?$.New(O,{Label:{$:1,$0:"Reset"},Style:jy.Style,Class:jy.Class}):(jB.$0,jy));jC=N.InputButton(jA,true);return N.WithResetFormlet(jz,jC);},WithCustomSubmitAndResetButtons:function(jD,jE,jF){return N.WithSubmitAndReset(jF,function(jG){return function(jH){var jI,jJ,jK,jL,jM,jP,jQ,jR,jS,jV,jW,jZ,j2,j3;jI=jH.$==1?(jJ=jH.$0,(jK=N.InputButton(jD,false),(jL=(jM=function(){return $.New(m,{$:1,$0:jJ});},function(jO){return r.MapResult(jM,jO);}),jL(jK)))):(jP=jH.$0,(jQ=N.InputButton(jD,true),(jR=(jS=function(){return jP;},function(jU){return r.Map(jS,jU);}),jR(jQ))));jV=(jW=r.Do(),jW.Delay(function(){return jW.Bind(r.LiftResult(N.InputButton(jE,true)),function(jY){if(jY.$==0){jG(null);}return jW.Return(null);});}));jZ=h.$(h.$(r.Return(function(j0){return function(){return j0;};}),jI),jV);j2=(j3=h.Layout().get_Horizontal(),function(j4){return r.WithLayout(j3,j4);});return j2(jZ);};});},WithCustomSubmitButton:function(j5,j6){var j7,j8;j7=(j8=j5.Label,j8.$==0?$.New(O,{Label:{$:1,$0:"Submit"},Style:j5.Style,Class:j5.Class}):(j8.$0,j5));return N.WithSubmitFormlet(j6,function(j9){var j_,j$,ka;j_=(j$=j9.$==0?true:false,N.InputButton(j7,j$));ka=function(kb){return r.Map(function(kc){kc;},kb);};return ka(j_);});},WithCustomValidationFrame:function(kd,ke){var kf,kg;kf=(kg=function(kh){return function(ki){var kj,kk,kl;kj=f.Div(g.ofArray([ki.Element]));kk=(kl=function(km){var kn,k0;kn=D.subscribeTo(kh,function(ko){var kp,kq,kr,ks,kt,kv,kw,kx,ky,kA,kB,kC,kD,kF,kG,kI,kJ,kK,kL,kN,kO,kP,kQ,kS,kT,kU,kV,kX,kY;if(ko.$==1){kp=ko.$0;kq=kd.ValidClass;if(kq.$==1){kr=kq.$0;ks=km["HtmlProvider@32"];(kt=km.Body,function(ku){return ks.RemoveClass(kt,ku);})(kr);}kv=kd.ErrorClass;if(kv.$==1){kw=kv.$0;kx=km["HtmlProvider@32"];(ky=km.Body,function(kz){return kx.AddClass(ky,kz);})(kw);}kA=kd.ErrorStyle;if(kA.$==1){kB=kA.$0;kC=km["HtmlProvider@32"];return(kD=km.Body,function(kE){return kC.SetStyle(kD,kE);})(kB);}else{kF=km["HtmlProvider@32"];return(kG=km.Body,function(kH){return kF.SetStyle(kG,kH);})("");}}else{kI=kd.ErrorClass;if(kI.$==1){kJ=kI.$0;kK=km["HtmlProvider@32"];(kL=km.Body,function(kM){return kK.RemoveClass(kL,kM);})(kJ);}kN=kd.ValidClass;if(kN.$==1){kO=kN.$0;kP=km["HtmlProvider@32"];(kQ=km.Body,function(kR){return kP.AddClass(kQ,kR);})(kO);}kS=kd.ValidStyle;if(kS.$==1){kT=kS.$0;kU=km["HtmlProvider@32"];return(kV=km.Body,function(kW){return kU.SetStyle(kV,kW);})(kT);}else{kX=km["HtmlProvider@32"];return(kY=km.Body,function(kZ){return kX.SetStyle(kY,kZ);})("");}}});k0=function(k1){k1;};return k0(kn);},function(k2){return o.OnAfterRender(kl,k2);});kk(kj);return kj;};},function(k3){return N.WrapFormlet(kg,k3);});return kf(ke);},WithCustomValidationIcon:function(k4,k5){var k6,k7,k9,k_,k$,lp,lq,lt,lu;k6=(k7=function(k8){return r.WithLayoutOrDefault(k8);},k7(k5));k9=(k_=(k$=r.Do(),k$.Delay(function(){return k$.Bind(r.LiftResult(k6),function(lb){return k$.Bind(function(lc){var ld,lm;ld=function(){var lf,lg,lh,lk,ll;if(lc.$==1){lf=lc.$0;lg=(lh=function(li){return function(lj){return li+" "+lj;};},v.fold(lh,"",lf));return o.add(f.Div(g.ofArray([f.Attr().Class(k4.ErrorIconClass),(lk=f.Attr(),lk.NewAttr("title",lg))])),g.ofArray([f.Div($.New(n,{$:0}))]));}else{return o.add(f.Div(g.ofArray([f.Attr().Class(k4.ValidIconClass),(ll=f.Attr(),ll.NewAttr("title",""))])),g.ofArray([f.Div($.New(n,{$:0}))]));}};lm=function(ln){return r.OfElement(ln);};return lm(ld);}(lb),function(){return k$.Return(lb);});});})),(lp=(lq=function(lr){return m.Join(lr);},function(ls){return r.MapResult(lq,ls);}),lp(k_)));lt=(lu=h.Layout().get_Horizontal(),function(lv){return r.WithLayout(lu,lv);});return lt(k9);},WithErrorFormlet:function(lw,lx){var ly,lz,lG;ly=(lz=r.Do(),lz.Delay(function(){return lz.Bind(r.LiftResult(lx),function(lB){var lC,lD;return lz.ReturnFrom(lB.$==1?(lC=lB.$0,(lD=r.Do(),lD.Delay(function(){return lD.Bind(lw(lC),function(){return lD.Return(lB);});}))):(lB.$0,r.Return(lB)));});}));lG=function(lH){return r.MapResult(function(lI){return m.Join(lI);},lH);};return lG(ly);},WithErrorSummary:function(lJ,lK){var lL,lM,l9,l_;lL=(lM=r.Do(),lM.Delay(function(){return lM.Bind(r.LiftResult(lK),function(lO){var lP,lQ,l4,l5,l8;return lM.ReturnFrom(lO.$==1?(lP=lO.$0,(lQ=function(lR){return r.OfElement(function(){var lT,lU,lV,lW,lX,lY,l1,l3;lT=g.ofArray([(lU=g.ofArray([f.Text(lJ)]),(lV=f.Tags(),lV.NewTag("legend",lU))),(lW=(lX=(lY=function(lZ){return f.LI(g.ofArray([f.Text(lZ)]));},function(l0){return g.map(lY,l0);}),lX(lR)),(l1=function(l2){return f.UL(l2);},l1(lW)))]);l3=f.Tags();return l3.NewTag("fieldset",lT);});}(lP),(l4=(l5=function(){return lO;},function(l7){return r.Map(l5,l7);}),l4(lQ)))):(l8=lO.$0,r.Return(lO)));});}));l9=(l_=function(l$){return m.Join(l$);},function(ma){return r.MapResult(l_,ma);});return l9(lL);},WithFormContainer:function(mb){return N.WithCustomFormContainer(P.get_Default(),mb);},WithJsonPost:function(mc,md){var me,mf,mg,mh,mi,mj,mk,ml,mm,mn,mo,mp,mq,mr,ms,mt,mu,mv,mw,mx,my,mz,mA,mB,mC,mK,mL,mM;me=(mf=mc.PostUrl,mf.$==0?$.New(n,{$:0}):(mg=mf.$0,g.ofArray([(mh=f.Attr(),mh.NewAttr("action",mg))])));mi=(mj=mc.EncodingType,mj.$==0?$.New(n,{$:0}):(mk=mj.$0,g.ofArray([(ml=f.Attr(),ml.NewAttr("enctype",mk))])));mm=(mn=f.Tags(),(mo=g.ofArray([(mp=f.Attr(),mp.NewAttr("type","hidden")),(mq=f.Attr(),(mr=mc.ParameterName,mq.NewAttr("name",mr)))]),mn.NewTag("input",mo)));ms=(mt=f.Tags(),(mu=g.ofArray([(mv=f.Attr(),mv.NewAttr("type","submit")),(mw=f.Attr(),mw.NewAttr("value","Submit"))]),mt.NewTag("input",mu)));mx=(my=g.append($.New(n,{$:1,$0:(mz=f.Attr(),mz.NewAttr("method","POST")),$1:$.New(n,{$:1,$0:(mA=f.Attr(),mA.NewAttr("style","display:none")),$1:me})}),mi),(mB=o.add(f.Form(my),g.ofArray([mm,ms])),(mC=function(mD){return o.OnAfterRender(function(mE){var mF,mG,mH,mI;mF=mc.EncodingType;if(mF.$==0){return null;}else{mG=mF.$0;if(mG==="multipart/form-data"){mH=p(mE.Body).attr("encoding","multipart/form-data");mI=function(mJ){mJ;};return mI(mH);}else{return null;}}},mD);},(mC(mB),mB))));mK=(mL=(mM=function(mN){var mO;mO=U.stringify(mN);p(mm.Body).val(mO);return p(ms.Body).click();},function(mP){return r.Map(mM,mP);}),mL(md));return f.Div(g.ofArray([mx,mK]));},WithLabel:function(mQ,mR){return r.WithLabel({$:1,$0:mQ},mR);},WithLabelAbove:function(mS){var mT,mU;mT=(mU=function(mV){var mW,mX,mY,mZ,m0;mW=(mX=(mY=mV.Label,mY.$==0?f.Span($.New(n,{$:0})):(mZ=mY.$0,mZ(null))),f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([mX]))])),f.TR(g.ofArray([f.TD(g.ofArray([mV.Element]))]))]))])));m0={$:0};return $.New(c,{Element:mW,Label:m0});},function(m1){return r.MapBody(mU,m1);});return mT(mS);},WithLabelAndInfo:function(m2,m3,m4){return N.WithLabel(function(){var m6,m7,m8;return w.InTable(g.ofArray([g.ofArray([(m6=g.ofArray([f.Text(m2)]),(m7=f.Tags(),m7.NewTag("label",m6))),f.Span(g.ofArray([(m8=f.Attr(),m8.NewAttr("title",m3)),f.Attr().Class("infoIcon")]))])]));},m4);},WithLabelConfiguration:function(m9,m_){var m$,na,nc,nd;m$=(na=function(nb){return r.ApplyLayout(nb);},na(m_));nc=(nd=h.Layout().LabelLayout(m9),function(ne){return r.WithLayout(nd,ne);});return nc(m$);},WithLabelLeft:function(nf){var ng,nh;ng=(nh=function(ni){var nj,nk,nl,nm,nn;nj=(nk=(nl=ni.Label,nl.$==0?f.Span($.New(n,{$:0})):(nm=nl.$0,nm(null))),f.Table(g.ofArray([f.TBody(g.ofArray([f.TR(g.ofArray([f.TD(g.ofArray([ni.Element])),f.TD(g.ofArray([nk]))]))]))])));nn={$:0};return $.New(c,{Element:nj,Label:nn});},function(no){return r.MapBody(nh,no);});return ng(nf);},WithLegend:function(np,nq){var nr,ns;nr=(ns=function(nt){var nu,nv,nw,nx,ny,nz,nA;nu=(nv=g.ofArray([(nw=g.ofArray([f.Tags().text(np)]),(nx=f.Tags(),nx.NewTag("legend",nw))),(ny=nt.Label,ny.$==0?nt.Element:(nz=ny.$0,w.InTable(g.ofArray([g.ofArray([nz(null),nt.Element])]))))]),(nA=f.Tags(),nA.NewTag("fieldset",nv)));return $.New(c,{Element:nu,Label:{$:0}});},function(nB){return r.MapBody(ns,nB);});return nr(nq);},WithResetAction:function(nC,nD){var nE,nF,nG,nL,nM;nE=(nF=(nG=r.New(function(){var nI,nJ;nI=nD.Build();nJ=function(nK){if(nC(null)){return nI.Notify.call(null,nK);}else{return null;}};return $.New(z,{Body:nI.Body,Dispose1:nI.Dispose1,Notify:nJ,State:nI.State});}),(nL=(nM=nD.get_Layout(),function(nN){return r.WithLayout(nM,nN);}),nL(nG))),h.PropagateRenderFrom(nD,nF));return h.OfIFormlet(nE);},WithResetButton:function(nO){return N.WithCustomResetButton(O.get_Default(),nO);},WithResetFormlet:function(nP,nQ){var nR,nS,nT,nU,nV,nW,nY,nZ,n0,n1,n2,n8;nR=(nS=(nT=(nU=(nV=(nW=function(nX){return r.WithLayoutOrDefault(nX);},nW(nP)),r.ApplyLayout(nV)),r.InitWithFailure(nU)),r.LiftResult(nT)),r.WithNotificationChannel(nS));nY=r.LiftResult(nQ);nZ=(n0=(n1=(n2=r.Do(),n2.Delay(function(){return n2.Bind(nR,$.Tupled(function(n4){var n5,n6;n5=n4[0];n6=n4[1];return n2.Bind(nY,function(n7){if(n7.$==0){n6(null);}return n2.Return(n5);});}));})),(n8=function(n9){return r.MapResult(function(n_){return m.Join(n_);},n9);},n8(n1))),h.PropagateRenderFrom(nR,n0));return h.OfIFormlet(nZ);},WithRowConfiguration:function(n$,oa){var ob,oc,oe,of;ob=(oc=function(od){return r.ApplyLayout(od);},oc(oa));oe=(of=h.Layout().RowLayout(n$),function(og){return r.WithLayout(of,og);});return oe(ob);},WithSubmitAndReset:function(oh,oi){var oj,ok,ol;oj=(ok=(ol=r.Do(),ol.Delay(function(){var on,oo,op;return ol.Bind((on=(oo=(op=function(oq){return r.InitWithFailure(oq);},op(oh)),r.LiftResult(oo)),r.WithNotificationChannel(on)),$.Tupled(function(or){var os,ot;os=or[0];ot=or[1];return ol.ReturnFrom((oi(ot))(os));}));})),h.PropagateRenderFrom(oh,ok));return h.OfIFormlet(oj);},WithSubmitAndResetButtons:function(ou){var ov,ow,ox,oy,oz;ov=(ow=(ox=O.get_Default(),$.New(O,{Label:{$:1,$0:"Submit"},Style:ox.Style,Class:ox.Class})),(oy=(oz=O.get_Default(),$.New(O,{Label:{$:1,$0:"Reset"},Style:oz.Style,Class:oz.Class})),function(oA){return N.WithCustomSubmitAndResetButtons(ow,oy,oA);}));return ov(ou);},WithSubmitButton:function(oB){return N.WithCustomSubmitButton(O.get_Default(),oB);},WithSubmitFormlet:function(oC,oD){var oE,oF,oG,oH,oO;oE=(oF=(oG=(oH=r.Do(),oH.Delay(function(){var oJ,oK;return oH.Bind((oJ=(oK=function(oL){return r.InitWithFailure(oL);},oK(oC)),r.LiftResult(oJ)),function(oM){return oH.Bind(oD(oM),function(){return oH.Return(oM);});});})),(oO=function(oP){return r.MapResult(function(oQ){return m.Join(oQ);},oP);},oO(oG))),h.PropagateRenderFrom(oC,oF));return h.OfIFormlet(oE);},WithTextLabel:function(oR,oS){return N.WithLabel(function(){var oU,oV;oU=g.ofArray([f.Text(oR)]);oV=f.Tags();return oV.NewTag("label",oU);},oS);},WithValidationFrame:function(oW){return N.WithCustomValidationFrame(S.get_Default(),oW);},WithValidationIcon:function(oX){return N.WithCustomValidationIcon(T.get_Default(),oX);},WrapFormlet:function(oY,oZ){return h.MkFormlet(function(){var o1,o2,o4,o5,o6,o7,o8;o1=(o2=function(o3){return r.WithLayoutOrDefault(o3);},o2(oZ));o4=r.BuildForm(o1);o5=o1.get_Layout().Apply.call(null,o4.Body).$0;o6=o5[1];o7=o5[0];o8=(oY(o4.State))(o7);return[o8,function(){return o4.Notify.call(null,null);},o4.State];});}},Formlet:{ApplyLayout:function(o_){var o$,pa;o$=(pa=h.BaseFormlet().ApplyLayout(o_),h.PropagateRenderFrom(o_,pa));return h.OfIFormlet(o$);},Bind:function(pb,pc){var pd,pe,pf,pg;pd=(pe=(pf=h.BaseFormlet(),(pg=function(ph){var pi;pi=pc(ph);return pi;},pf.Bind(pb,pg))),h.PropagateRenderFrom(pb,pe));return h.OfIFormlet(pd);},BindWith:function(pj,pk,pl){var pm,pn,po,pp;pm=(pn=(po=h.BaseFormlet(),(pp=pl,po.BindWith(pj,pk,pp))),h.PropagateRenderFrom(pk,pn));return h.OfIFormlet(pm);},BuildForm:function(pq){return h.BaseFormlet().BuildForm(pq);},BuildFormlet:function(pr){return h.MkFormlet(pr);},Choose:function(ps){var pt,pu,pv,pw,px,py,pz,pM,p$,qc;pt={contents:0};pu=(pv=(pw=(px=(py=(pz=function(pA){var pB,pC,pD,pE,pH,pJ;pB=(pC=(pD=(pE=function(pF){s.Increment(pt);return[pF,pt.contents];},function(pG){return r.Map(pE,pG);}),pD(pA)),(pH=function(pI){return r.InitWithFailure(pI);},pH(pC)));pJ=function(pK){return r.LiftResult(pK);};return pJ(pB);},function(pL){return v.map(pz,pL);}),py(ps)),r.Sequence(px)),(pM=function(pN){return r.Map(function(pO){var pP,pQ,pR,pS,pT,pX,pY,p3,p5,p6;pP=(pQ=(pR=(pS=(pT=function(pU){var pV;if(pU.$==0){pV=pU.$0;return{$:1,$0:pV};}else{return{$:0};}},function(pW){return g.choose(pT,pW);}),pS(pO)),(pX=(pY=$.Tupled(function(pZ){var p0,p1;p0=pZ[0];p1=pZ[1];return p1;}),function(p2){return g.sortBy(pY,p2);}),pX(pR))),(p3=function(p4){return g.rev(p4);},p3(pQ)));p5=(p6=$.Tupled(function(p7){var p8,p9;p8=p7[0];p9=p7[1];return{$:1,$0:p8};}),function(p_){return v.tryPick(p6,p_);});return p5(pP);},pN);},pM(pw))),(p$=function(qa){return h.Validator().Is(function(qb){return qb.$==1;},"",qa);},p$(pv)));qc=function(qd){return r.Map(function(qe){return qe.$0;},qd);};return qc(pu);},Delay:function(qf){var qg;qg=h.BaseFormlet().Delay(function(){return qf(null);});return h.OfIFormlet(qg);},Deletable:function(qi){var qj,qk;qj=(qk=h.BaseFormlet().Deletable(qi),h.PropagateRenderFrom(qi,qk));return h.OfIFormlet(qj);},Do:$.Field(function(){return V.New();}),Empty:function(){var ql;ql=h.BaseFormlet().Empty();return h.OfIFormlet(ql);},FailWith:function(qm){var qn;qn=h.BaseFormlet().FailWith(qm);return h.OfIFormlet(qn);},FlipBody:function(qo){var qp,qq;qp=(qq=h.BaseFormlet().FlipBody(qo),h.PropagateRenderFrom(qo,qq));return h.OfIFormlet(qp);},Flowlet:function(qr){var qs,qt,qu,qv;qs=(qt=(qu=h.BaseFormlet(),(qv=h.Layout().get_Flowlet(),qu.WithLayout(qv,qr))),h.PropagateRenderFrom(qr,qt));return h.OfIFormlet(qs);},Horizontal:function(qw){var qx,qy,qz,qA;qx=(qy=(qz=h.BaseFormlet(),(qA=h.Layout().get_Horizontal(),qz.WithLayout(qA,qw))),h.PropagateRenderFrom(qw,qy));return h.OfIFormlet(qx);},InitWith:function(qB,qC){var qD,qE,qF;qD=(qE=(qF=h.BaseFormlet(),qF.InitWith(qB,qC)),h.PropagateRenderFrom(qC,qE));return h.OfIFormlet(qD);},InitWithFailure:function(qG){var qH,qI;qH=(qI=h.BaseFormlet().InitWithFailure(qG),h.PropagateRenderFrom(qG,qI));return h.OfIFormlet(qH);},Join:function(qJ){var qK,qL,qM,qN,qO,qR,qS;qK=(qL=(qM=(qN=(qO=function(qP){return qP;},function(qQ){return r.Map(qO,qQ);}),qN(qJ)),(qR=(qS=h.BaseFormlet(),function(qT){return qS.Join(qT);}),qR(qM))),h.PropagateRenderFrom(qJ,qL));return h.OfIFormlet(qK);},LiftResult:function(qU){var qV,qW;qV=(qW=h.BaseFormlet().LiftResult(qU),h.PropagateRenderFrom(qU,qW));return h.OfIFormlet(qV);},Map:function(qX,qY){var qZ,q0,q1;qZ=(q0=(q1=h.BaseFormlet(),q1.Map(qX,qY)),h.PropagateRenderFrom(qY,q0));return h.OfIFormlet(qZ);},MapBody:function(q2,q3){var q4,q5,q6;q4=(q5=(q6=h.BaseFormlet(),q6.MapBody(q2,q3)),h.PropagateRenderFrom(q3,q5));return h.OfIFormlet(q4);},MapElement:function(q7,q8){var q9,q_,q$,ra,rb;q9=(q_=(q$=(ra=h.BaseFormlet(),(rb=function(rc){return $.New(c,{Element:q7(rc.Element),Label:rc.Label});},function(rd){return ra.MapBody(rb,rd);})),q$(q8)),h.PropagateRenderFrom(q8,q_));return h.OfIFormlet(q9);},MapResult:function(re,rf){var rg,rh,ri;rg=(rh=(ri=h.BaseFormlet(),ri.MapResult(re,rf)),h.PropagateRenderFrom(rf,rh));return h.OfIFormlet(rg);},Never:function(){var rj;rj=h.BaseFormlet().Never();return h.OfIFormlet(rj);},New:function(rk){var rl;rl=h.BaseFormlet().New(rk);return h.OfIFormlet(rl);},OfElement:function(rm){return h.MkFormlet(function(){var ro;ro=rm(null);return[ro,function(rp){rp;},h.RX().Return($.New(m,{$:0,$0:null}))];});},Render:function(rq){var rr;rr=rq.Run(function(rs){rs;});return h.PropagateRenderFrom(rq,rr);},Replace:function(rt,ru){var rv,rw,rx,ry;rv=(rw=(rx=h.BaseFormlet(),(ry=ru,rx.Replace(rt,ry))),h.PropagateRenderFrom(rt,rw));return h.OfIFormlet(rv);},ReplaceFirstWithFailure:function(rz){var rA,rB;rA=(rB=h.BaseFormlet().ReplaceFirstWithFailure(rz),h.PropagateRenderFrom(rz,rB));return h.OfIFormlet(rA);},Return:function(rC){var rD;rD=h.BaseFormlet().Return(rC);return h.OfIFormlet(rD);},ReturnEmpty:function(rE){var rF;rF=h.BaseFormlet().ReturnEmpty(rE);return h.OfIFormlet(rF);},Run:function(rG,rH){return rH.Run(rG);},SelectMany:function(rI){var rJ,rK,rL,rM,rN,rQ,rR;rJ=(rK=(rL=(rM=(rN=function(rO){return rO;},function(rP){return r.Map(rN,rP);}),rM(rI)),(rQ=(rR=h.BaseFormlet(),function(rS){return rR.SelectMany(rS);}),rQ(rL))),h.PropagateRenderFrom(rI,rK));return h.OfIFormlet(rJ);},Sequence:function(rT){var rU,rV,rW,rX,r0,r1;rU=(rV=(rW=(rX=function(rY){return rY;},function(rZ){return v.map(rX,rZ);}),rW(rT)),(r0=(r1=h.BaseFormlet(),function(r2){return r1.Sequence(r2);}),r0(rV)));return h.OfIFormlet(rU);},Switch:function(r3){var r4,r5,r6,r7,r8,r$,sa;r4=(r5=(r6=(r7=(r8=function(r9){return r9;},function(r_){return r.Map(r8,r_);}),r7(r3)),(r$=(sa=h.BaseFormlet(),function(sb){return sa.Switch(sb);}),r$(r6))),h.PropagateRenderFrom(r3,r5));return h.OfIFormlet(r4);},Vertical:function(sc){var sd,se,sf,sg;sd=(se=(sf=h.BaseFormlet(),(sg=h.Layout().get_Vertical(),sf.WithLayout(sg,sc))),h.PropagateRenderFrom(sc,se));return h.OfIFormlet(sd);},WithCancelation:function(sh,si){var sj,sk,sl;sj=(sk=(sl=h.BaseFormlet(),sl.WithCancelation(sh,si)),h.PropagateRenderFrom(sh,sk));return h.OfIFormlet(sj);},WithLabel:function(sm,sn){var so,sp,sq,sr,ss;so=(sp=(sq=(sr=h.BaseFormlet(),(ss=function(st){return $.New(c,{Element:st.Element,Label:sm});},function(su){return sr.MapBody(ss,su);})),sq(sn)),h.PropagateRenderFrom(sn,sp));return h.OfIFormlet(so);},WithLayout:function(sv,sw){var sx,sy,sz;sx=(sy=(sz=h.BaseFormlet(),sz.WithLayout(sv,sw)),h.PropagateRenderFrom(sw,sy));return h.OfIFormlet(sx);},WithLayoutOrDefault:function(sA){var sB,sC;sB=(sC=h.BaseFormlet().WithLayoutOrDefault(sA),h.PropagateRenderFrom(sA,sC));return h.OfIFormlet(sB);},WithNotification:function(sD,sE){var sF,sG,sH;sF=(sG=(sH=h.BaseFormlet(),sH.WithNotification(sD,sE)),h.PropagateRenderFrom(sE,sG));return h.OfIFormlet(sF);},WithNotificationChannel:function(sI){var sJ,sK;sJ=(sK=h.BaseFormlet().WithNotificationChannel(sI),h.PropagateRenderFrom(sI,sK));return h.OfIFormlet(sJ);}},FormletBuilder:$.Class({Bind:function(sL,sM){var sN,sO,sP,sQ;sN=(sO=(sP=h.BaseFormlet(),(sQ=function(sR){var sS;sS=sM(sR);return sS;},sP.Bind(sL,sQ))),h.PropagateRenderFrom(sL,sO));return h.OfIFormlet(sN);},Delay:function(sT){var sU;sU=h.BaseFormlet().Delay(sT);return h.OfIFormlet(sU);},Return:function(sV){var sW;sW=h.BaseFormlet().Return(sV);return h.OfIFormlet(sW);},ReturnFrom:function(sX){var sY;sY=function(sZ){return h.OfIFormlet(sZ);};return sY(sX);}},{New:function(){var s0;s0=$.New(this,{});return s0;}}),Layout:{FormRowConfiguration:$.Class({},{get_Default:function(){return $.New(X,{Padding:{$:0},Color:{$:0},Class:{$:0},Style:{$:0},LabelConfiguration:{$:0}});}}),LabelConfiguration:$.Class({},{get_Default:function(){return $.New(Y,{Align:{$:0},VerticalAlign:{$:1},Placement:{$:0}});}}),Padding:$.Class({},{get_Default:function(){return $.New(Z,{Left:{$:0},Right:{$:0},Top:{$:0},Bottom:{$:0}});}})},LayoutProvider:$.Class({ColumnLayout:function(s1){var s2,tb=this;s2=this.LayoutUtils;return s2.New(function(){var s4,s5,s6,s7,th;s4=f.TR($.New(n,{$:0}));s5=f.Table(g.ofArray([f.TBody(g.ofArray([s4]))]));s6=M.NewElementStore();s7=function(s8){return function(s9){var s_,s$,tc,td,te;s_=s9.Element.get_Id();s$=f.TD(g.ofArray([f.Table(g.ofArray([f.TBody(g.ofArray([function(ta){return tb.MakeRow(s1,s8,ta);}(s9)]))]))]));tc=p(s4.Body);td={contents:0};te={contents:false};tc.children().each(function(){var tf;tf=p(this);if(s8===td.contents){p(s$.Body).insertBefore(tf);s$.Render();te.contents=true;}return s.Increment(td);});if(!te.contents){s4.AppendI(s$);}return s6.RegisterElement(s_,function(){return s$["HtmlProvider@32"].Remove(s$.Body);});};};th=function(ti){var tj;tj=_0.Get(ti);$.While(function(){return tj.MoveNext();},function(){var tk;tk=tj.get_Current(),s6.Remove(tk.Element.get_Id());});};return{Body:$.New(c,{Element:s5,Label:{$:0}}),SyncRoot:null,Insert:s7,Remove:th};});},HorizontalAlignElem:function(tl,tm){var tn,to,tp;tn=tl.$==0?"left":"right";return o.add(f.Div(g.ofArray([(to=f.Attr(),(tp="float:"+tn+";",to.NewAttr("style",tp)))])),g.ofArray([tm]));},LabelLayout:function(tq){var tr,ts;return this.RowLayout((tr=X.get_Default(),(ts={$:1,$0:tq},$.New(X,{Padding:tr.Padding,Color:tr.Color,Class:tr.Class,Style:tr.Style,LabelConfiguration:ts}))));},MakeLayout:function(tt){var tu;tu=this.LayoutUtils;return tu.New(function(){var tw,tx,ty,tG;tw=tt(null);tx=M.NewElementStore();ty=function(tz){return function(tA){var tB,tC;tB=tA.Element.get_Id();tC=(tw.Insert.call(null,tz))(tA);return tx.RegisterElement(tB,function(){var tE;tE=_0.Get(tC);$.While(function(){return tE.MoveNext();},function(){var tF;tF=tE.get_Current(),tF["HtmlProvider@32"].Remove(tF.Body);});});};};tG=function(tH){var tI;tI=_0.Get(tH);$.While(function(){return tI.MoveNext();},function(){var tJ;tJ=tI.get_Current(),tx.Remove(tJ.Element.get_Id());});};return{Body:$.New(c,{Element:tw.Panel,Label:{$:0}}),SyncRoot:null,Insert:ty,Remove:tG};});},MakeRow:function(tK,tL,tM){var tN,tO,tP,tQ,tT,tU,tV,tW,tZ,t0,t1,t2,t5,t6,t7,t8,t$,ua,ub,uc,uf,uN,uO,uP,uQ,uR,uS,uT,uU,uX,uY,uZ,u0,u2=this,u3,u4,u5,u6,u7,u8,u9,u_,u$,vd,ve,vf,vg,vk,vl,vm,vn,vq,vr,vs,vv,vy,vz;tN=(tO=tK.Padding,(tP=(tQ=Z.get_Default(),function(tR){return w.Maybe(tQ,function(tS){return tS;},tR);}),tP(tO)));tT=(tU=tN.Left,(tV=(tW=function(tX){return tX;},function(tY){return w.Maybe(0,tW,tY);}),tV(tU)));tZ=(t0=tN.Top,(t1=(t2=function(t3){return t3;},function(t4){return w.Maybe(0,t2,t4);}),t1(t0)));t5=(t6=tN.Right,(t7=(t8=function(t9){return t9;},function(t_){return w.Maybe(0,t8,t_);}),t7(t6)));t$=(ua=tN.Bottom,(ub=(uc=function(ud){return ud;},function(ue){return w.Maybe(0,uc,ue);}),ub(ua)));uf=function(ug){return function(uh){return function(ui){return function(uj){return function(uk){return function(ul){return function(um){var un,uo,up,uq,ur,uw,uA,uB,uC,uG,uH,uI,uJ,uK,uL,uM;un=(uo=(up=g.ofArray([["padding-left: ",ug],["padding-top: ",uh],["padding-right: ",ui],["padding-bottom: ",uj]]),(uq=(ur=$.Tupled(function(us){var ut,uu;ut=us[0];uu=us[1];return ut+$$.String(uu)+"px;";}),function(uv){return g.map(ur,uv);}),uq(up))),(uw=function(ux){return v.reduce(function(uy){return function(uz){return uy+uz;};},ux);},uw(uo)));uA=(uB=(uC=function(uD){var uE;uE=uD.$==1?"middle":uD.$==2?"bottom":"top";return"vertical-align: "+uE+";";},function(uF){return w.Maybe("",uC,uF);}),uB(ul));uG=(uH=f.Attr(),(uI=un+";"+uA,uH.NewAttr("style",uI)));uJ=uk?g.ofArray([(uK=f.Attr(),uK.NewAttr("colspan","2"))]):$.New(n,{$:0});return f.TD((uL=$.New(n,{$:1,$0:uG,$1:uJ}),(uM=g.ofArray([um]),g.append(uL,uM))));};};};};};};};uN=tM.Element;uO=(uP=tM.Label,uP.$==1?(uQ=uP.$0,(uR=(uS=tK.LabelConfiguration,(uT=(uU=Y.get_Default(),function(uV){return w.Maybe(uU,function(uW){return uW;},uV);}),uT(uS))),(uX=(uY=uQ(null),(uZ=(u0=uR.Align,function(u1){return u2.HorizontalAlignElem(u0,u1);}),uZ(uY))),(u3=uR.Placement,u3.$==3?g.ofArray([(u4=w.InTable(g.ofArray([g.ofArray([uN]),g.ofArray([uX])])),(u5=(((((uf(tT))(tZ))(t5))(t$))(true))({$:0}),u5(u4)))]):u3.$==0?g.ofArray([((((((uf(tT))(tZ))(0))(t$))(false))({$:1,$0:uR.VerticalAlign}))(uX),((((((uf(0))(tZ))(t5))(t$))(false))({$:0}))(uN)]):u3.$==1?g.ofArray([((((((uf(tT))(tZ))(0))(t$))(false))({$:1,$0:uR.VerticalAlign}))(uN),((((((uf(0))(tZ))(t5))(t$))(false))({$:0}))(uX)]):g.ofArray([(u6=w.InTable(g.ofArray([g.ofArray([uX]),g.ofArray([uN])])),(u7=(((((uf(tT))(tZ))(t5))(t$))(true))({$:0}),u7(u6)))]))))):g.ofArray([((((((uf(tT))(tZ))(t5))(t$))(true))({$:0}))(uN)]));u8=(u9=tK.Class,(u_=(u$=$.New(n,{$:0}),function(va){return w.Maybe(u$,function(vb){var vc;return g.ofArray([(vc=vb(tL),f.Attr().Class(vc))]);},va);}),u_(u9)));vd=(ve=tK.Color,(vf=(vg=$.New(n,{$:0}),function(vh){return w.Maybe(vg,function(vi){var vj;vj=vi(tL);return g.ofArray(["background-color: "+vj]);},vh);}),vf(ve)));vk=(vl=tK.Style,(vm=(vn=$.New(n,{$:0}),function(vo){return w.Maybe(vn,function(vp){return g.ofArray([vp(tL)]);},vo);}),vm(vl)));vq=(vr=g.append(vd,vk),vr.$==0?$.New(n,{$:0}):g.ofArray([(vs=v.reduce(function(vt){return function(vu){return vt+";"+vu;};},vr),(vv=function(vw){var vx;vx=f.Attr();return vx.NewAttr("style",vw);},vv(vs)))]));return f.TR((vy=(vz=g.append(vq,uO),g.append(vq,vz)),g.append(u8,vy)));},RowLayout:function(vA){var vB,vM=this;vB=this.LayoutUtils;return vB.New(function(){var vD,vE,vF,vG,vS;vD=f.TBody($.New(n,{$:0}));vE=f.Table(g.ofArray([vD]));vF=M.NewElementStore();vG=function(vH){return function(vI){var vJ,vK,vN,vO,vP;vJ=vI.Element.get_Id();vK=function(vL){return vM.MakeRow(vA,vH,vL);}(vI);vN=p(vD.Body);vO={contents:0};vP={contents:false};vN.children().each(function(){var vQ;vQ=p(this);if(vH===vO.contents){p(vK.Body).insertBefore(vQ);vK.Render();vP.contents=true;}return s.Increment(vO);});if(!vP.contents){vD.AppendI(vK);}return vF.RegisterElement(vJ,function(){return vK["HtmlProvider@32"].Remove(vK.Body);});};};vS=function(vT){var vU;vU=_0.Get(vT);$.While(function(){return vU.MoveNext();},function(){var vV;vV=vU.get_Current(),vF.Remove(vV.Element.get_Id());});};return{Body:$.New(c,{Element:vE,Label:{$:0}}),SyncRoot:null,Insert:vG,Remove:vS};});},VerticalAlignedTD:function(vW,vX){var vY,vZ,v0,v1;vY=vW.$==1?"middle":vW.$==2?"bottom":"top";vZ=f.TD(g.ofArray([vX]));v0=vZ["HtmlProvider@32"];((v1=vZ.Body,function(v2){return function(v3){return v0.SetCss(v1,v2,v3);};})("vertical-align"))(vY);return vZ;},get_Flowlet:function(){return this.MakeLayout(function(){var v5,v6;v5=f.Div($.New(n,{$:0}));v6=function(){return function(v8){var v9,v_;v9=v8.Label.$==1?v8.Label.$0.call(null,null):f.Span($.New(n,{$:0}));v_=w.InTable(g.ofArray([g.ofArray([v9,f.Div(g.ofArray([v8.Element]))])]));v5["HtmlProvider@32"].Clear(v5.Body);v5.AppendI(v_);return g.ofArray([v_]);};};return{Insert:v6,Panel:v5};});},get_Horizontal:function(){return this.ColumnLayout(X.get_Default());},get_Vertical:function(){return this.RowLayout(X.get_Default());}},{New:function(v$){var wa;wa=$.New(this,{});wa.LayoutUtils=v$;return wa;}}),Utils:{InTable:function(wb){var wc,wd,we,wm;wc=(wd=(we=function(wf){var wg,wh,wi;wg=(wh=(wi=function(wj){return f.TD(g.ofArray([wj]));},function(wk){return g.map(wi,wk);}),wh(wf));return f.TR(wg);},function(wl){return g.map(we,wl);}),wd(wb));wm=f.TBody(function(wn){return wn;}(wc));return f.Table(g.ofArray([wm]));},MapOption:function(wo,wp){var wq;if(wp.$==1){wq=wp.$0;return{$:1,$0:wo(wq)};}else{return{$:0};}},Maybe:function(wr,ws,wt){if(wt.$==0){return wr;}else{return ws(wt.$0);}}}}}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Body);d=$.Safe(b.Controls);e=$.Safe(a.Html);f=$.Safe(e.Default);g=$.Safe(a.List);h=$.Safe(b.Data);i=$.Safe($$.IntelliFactory.Reactive);j=$.Safe(i.HotStream);k=$.Safe($$.IntelliFactory.Formlet);l=$.Safe(k.Base);m=$.Safe(l.Result);n=$.Safe(g.T);o=$.Safe(e.Operators);p=$.Safe($$.jQuery);q=$.Safe(e.EventsPervasives);r=$.Safe(b.Formlet);s=$.Safe(a.Operators);t=$.Safe(b.CssConstants);u=$.Safe($$.Math);v=$.Safe(a.Seq);w=$.Safe(b.Utils);x=$.Safe(l.Tree);y=$.Safe(x.Edit);z=$.Safe(l.Form);A=$.Safe(a.Arrays);B=$.Safe(l.FormletProvider);C=$.Safe(h.Formlet);D=$.Safe(a.Util);E=$.Safe(b.LayoutProvider);F=$.Safe(l.LayoutUtils);G=$.Safe(i.Reactive);H=$.Safe(l.Validator);I=$.Safe(h.ValidatorProvidor);J=$.Safe($$.RegExp);K=$.Safe(a.Collections);L=$.Safe(K.Dictionary);M=$.Safe(b.ElementStore);N=$.Safe(b.Enhance);O=$.Safe(N.FormButtonConfiguration);P=$.Safe(N.FormContainerConfiguration);Q=$.Safe(N.Padding);R=$.Safe(N.ManyConfiguration);S=$.Safe(N.ValidationFrameConfiguration);T=$.Safe(N.ValidationIconConfiguration);U=$.Safe($$.JSON);V=$.Safe(b.FormletBuilder);W=$.Safe(b.Layout);X=$.Safe(W.FormRowConfiguration);Y=$.Safe(W.LabelConfiguration);Z=$.Safe(W.Padding);return _0=$.Safe(a.Enumerator);});$.OnLoad(function(){r.Do();h.Validator();h.RX();h.Layout();h.DefaultLayout();t.InputTextClass();});}());
