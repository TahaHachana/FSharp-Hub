(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R;$.Define($$,{Website:{BooksAdmin:{Client:{addFormlet:$.Field(function(){var S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,bh,bi;S=c.Input("");T=d.WithTextLabel("URL",S);U=c.Input("");V=d.WithTextLabel("Title",U);W=d.WithTextLabel("Author",c.Input(""));X=d.Many(W);Y=d.WithFormContainer(X);Z=c.Input("");_0=d.WithTextLabel("Publisher",Z);_1=c.Input("");_2=d.WithTextLabel("ISBN",_1);_3=c.Input("");_4=d.WithTextLabel("Pages",_3);_5=c.Input("");_6=d.WithTextLabel("Release Date",_5);_7=c.Input("");_8=d.WithTextLabel("Cover URL",_7);_9=e.$(e.$(e.$(e.$(e.$(e.$(e.$(e.$(f.Return(function(_){return function(ba){return function(bb){return function(bc){return function(bd){return function(be){return function(bf){return function(bg){return[_,ba,bb,bc,bd,be,bf,bg];};};};};};};};}),T),V),Y),_0),_2),_4),_6),_8);bh=d.WithSubmitAndResetButtons(_9);bi=d.WithFormContainer(bh);return f.Run($.Tupled(function(bj){var bk,bl,bm,bn,bo,bp,bq,br;bk=bj[0];bl=bj[1];bm=bj[2];bn=bj[3];bo=bj[4];bp=bj[5];bq=bj[6];br=bj[7];return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:11",[bk,bl,bm,bn,bo,bp,bq,br]),function(bt){if(bt){i("New book inserted successfully.");return g.Return(null);}else{i("The query failed.");return g.Return(null);}});}));}),bi);}),main:function(){return k.add(l.Div(m.ofArray([l.Attr().Class("row")])),m.ofArray([l.Div(m.ofArray([l.H1(m.ofArray([l.Text("Add new book")])),l.Div(m.ofArray([p.addFormlet()]))]))]));},tr:function(bt,bu){return l.TR(m.ofArray([l.TD(m.ofArray([l.Text(bt)])),l.TD(m.ofArray([l.Text(bu)]))]));}},Control:$.Class({get_Body:function(){return p.main();}})},GitHubGists:{Client:{main:function(){var bv;bv=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(bw){return g.Start(g.Delay(function(){var by;by=h.Async("Sitelet:4",[]);return g.Bind(by,function(bz){var bA;bA=l.UL(m.ofArray([l.Attr().Class("media-list")]));q.iter(function(bB){var bC,bD,bE;bC=bB.ownerLink;bD=bB.ownerAvatar;bE=bB.link;return bA.AppendI(k.add(l.LI(m.ofArray([l.Attr().Class("media")])),m.ofArray([k.add(l.A(m.ofArray([l.Attr().Class("media-left"),l.Attr().NewAttr("href",bC),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Attr().NewAttr("src",bD)]))])),k.add(l.Div(m.ofArray([l.Attr().Class("media-body")])),m.ofArray([k.add(l.H4(m.ofArray([l.Attr().Class("media-heading")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",bE),l.Attr().NewAttr("target","_blank"),l.Text("Gist by "+bB.ownerName)]))]))]))])));},bz);bw.AppendI(bA);return g.Return(null);});}));},bv);return bv;}},Control:$.Class({get_Body:function(){return s.main();}})},GitHubIssues:{Client:{main:function(){var bF;bF=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(bG){return g.Start(g.Delay(function(){var bI;bI=h.Async("Sitelet:1",[]);return g.Bind(bI,function(bJ){var bK;bK=l.UL(m.ofArray([l.Attr().Class("media-list"),l.Attr().NewAttr("id","tweets-ul")]));t.iter($.Tupled(function(bL){var bM,bN,bO,bP,bQ;bM=bL[0];bN=bL[1];bO=bL[2];bP=bL[3];bQ=bL[4];return bK.AppendI(k.add(l.LI(m.ofArray([l.Attr().Class("media")])),m.ofArray([k.add(l.A(m.ofArray([l.Attr().Class("media-left"),l.Attr().NewAttr("href",bM),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Attr().NewAttr("style","width: 30px; height: 30px;"),l.Attr().NewAttr("src",bN)]))])),k.add(l.Div(m.ofArray([l.Attr().Class("media-body")])),m.ofArray([k.add(l.H4(m.ofArray([l.Attr().Class("media-heading")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",bP),l.Attr().NewAttr("target","_blank"),l.Text(bO)]))])),l.P(m.ofArray([l.Text(bQ)]))]))])));}),bJ);bG.AppendI(bK);return g.Return(null);});}));},bF);return bF;}},Control:$.Class({get_Body:function(){return v.main();}})},GitHubRepos:{Client:{hideProress:function(){if(w("[data-status=\"loading\"]").length===0){w("#progress-bar").slideUp();return w("[data-spy=\"scroll\"]").each(function(){return w(this).scrollspy.call(null,"refresh");});}else{return w("[data-spy=\"scroll\"]").each(function(){return w(this).scrollspy.call(null,"refresh");});}},newRepos:function(){var bR;bR=l.Div(m.ofArray([x.Attr().NewAttr("data-"+"status","loading")]));k.OnAfterRender(function(bS){return g.Start(g.Delay(function(){var bU;bU=h.Async("Sitelet:2",[]);return g.Bind(bU,function(bV){t.iter(function(bW){return bS.AppendI(k.add(l.Div(m.ofArray([l.Attr().Class("row data-row")])),bW));},y.split(2,q.mapi(function(bX){return function(bY){var bZ,b0,b1,b2;bZ=bX%2===0?"col-md-5":"col-md-5 col-md-offset-1";b0=bY.ownerLink;b1=bY.ownerAvatar;b2=bY.link;return k.add(l.Div(m.ofArray([l.Attr().Class(bZ)])),m.ofArray([k.add(l.Div(m.ofArray([l.Attr().Class("media")])),m.ofArray([k.add(l.A(m.ofArray([l.Attr().Class("media-left"),l.Attr().NewAttr("href",b0),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Attr().NewAttr("style","width: 30px; height: 30px;"),l.Attr().NewAttr("src",b1)]))])),k.add(l.Div(m.ofArray([l.Attr().Class("media-body")])),m.ofArray([k.add(l.H4(m.ofArray([l.Attr().Class("media-heading"),l.Attr().NewAttr("style","word-break: break-word;")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",b2),l.Attr().NewAttr("target","_blank"),l.Text(bY.name)]))])),l.P(m.ofArray([l.Text(bY.createdAt)])),l.P(m.ofArray([l.Text(bY.description)]))]))]))]));};},bV)));bS["HtmlProvider@32"].RemoveAttribute(bS.Body,"data-status");A.hideProress();return g.Return(null);});}));},bR);return bR;},updatedRepos:function(){var b3;b3=l.Div(m.ofArray([x.Attr().NewAttr("data-"+"status","loading")]));k.OnAfterRender(function(b4){return g.Start(g.Delay(function(){var b6;b6=h.Async("Sitelet:3",[]);return g.Bind(b6,function(b7){t.iter(function(b8){return b4.AppendI(k.add(l.Div(m.ofArray([l.Attr().Class("row data-row")])),b8));},y.split(2,q.mapi(function(b9){return function(b_){var b$,ca,cb,cc;b$=b9%2===0?"col-md-5":"col-md-5 col-md-offset-1";ca=b_.ownerLink;cb=b_.ownerAvatar;cc=b_.link;return k.add(l.Div(m.ofArray([l.Attr().Class(b$)])),m.ofArray([k.add(l.Div(m.ofArray([l.Attr().Class("media")])),m.ofArray([k.add(l.A(m.ofArray([l.Attr().Class("media-left"),l.Attr().NewAttr("href",ca),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Attr().NewAttr("style","width: 30px; height: 30px;"),l.Attr().NewAttr("src",cb)]))])),k.add(l.Div(m.ofArray([l.Attr().Class("media-body")])),m.ofArray([k.add(l.H4(m.ofArray([l.Attr().Class("media-heading"),l.Attr().NewAttr("style","word-break: break-word;")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",cc),l.Attr().NewAttr("target","_blank"),l.Text(b_.name)]))])),l.P(m.ofArray([l.Text(b_.pushedAt)])),l.P(m.ofArray([l.Text(b_.description)]))]))]))]));};},b7)));b4["HtmlProvider@32"].RemoveAttribute(b4.Body,"data-status");A.hideProress();return g.Return(null);});}));},b3);return b3;}},NewReposControl:$.Class({get_Body:function(){return A.newRepos();}}),UpdatedReposControl:$.Class({get_Body:function(){return A.updatedRepos();}})},Login:{Client:{loginForm:function(cd){var ce,cf,cg,cl,cm,cn,co,cp;ce=l.Input(m.ofArray([l.Attr().Class("form-control"),l.Attr().NewAttr("id","username"),l.Attr().NewAttr("type","text"),x.Attr().NewAttr("autofocus","autofocus")]));cf=k.add(l.Button(m.ofArray([l.Attr().Class("btn btn-primary btn-block"),l.Attr().NewAttr("id","login-btn"),l.Attr().NewAttr("type","button")])),m.ofArray([l.Text("Submit")]));cg=function(){return function(){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:9",[{Name:ce.get_Value(),Password:C.passInput().get_Value()}]),function(ck){if(ck.$==1){D.location.assign(cd);return g.Return(null);}else{i("Login failed");return g.Return(null);}});}));};};E.Events().OnClick(cg,cf);cl=cf;cm=m.ofArray([l.Attr().Class("form-group")]);cn=m.ofArray([l.Text("Username"),l.Attr().NewAttr("for","username")]);co=m.ofArray([l.Text("Password"),l.Attr().NewAttr("for","password")]);cp=m.ofArray([cl]);return k.add(l.Form(m.ofArray([l.Attr().NewAttr("role","form"),l.Attr().NewAttr("id","signin")])),m.ofArray([l.H2(m.ofArray([l.Text("Please sign in")])),k.add(l.Tags().NewTag("fieldset",cm),m.ofArray([l.Tags().NewTag("label",cn),ce,l.Tags().NewTag("label",co),C.passInput()])),l.Tags().NewTag("fieldset",cp)]));},passInput:$.Field(function(){var cq,cr;cq=l.Input(m.ofArray([l.Attr().Class("form-control"),l.Attr().NewAttr("id","password"),l.Attr().NewAttr("type","password")]));cr=function(){return function(ct){return ct.KeyCode===13?w("#login-btn").click():null;};};E.Events().OnKeyDown(cr,cq);return cq;})},Control:$.Class({get_Body:function(){return C.loginForm(this.redirectUrl);}})},News:{Control:$.Class({get_Body:function(){return F.main();}}),main:$.Field(function(){var cu;cu=l.UL(m.ofArray([l.Attr().NewAttr("id","news-list")]));w.getJSON("http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=http%3A%2F%2Ffpish.net%2Frss%2Fblogs%2Ftag%2F1%2Ff~23",$.Tupled(function(cv){var cw,cx,cy,cz;cw=cv[0];cx=cv[1];cy=cw.responseData.feed.entries;cz=G.GetArraySlice(cy,{$:0},{$:1,$0:4});return q.iter(function(cA){var cB;cB=cA.link;return cu.AppendI(l.LI(m.ofArray([k.add(l.H4(m.ofArray([l.Attr().Class("list-group-item-heading")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",cB),l.Attr().NewAttr("target","_blank"),l.Text(cA.title)]))])),l.P(m.ofArray([l.Text(cA.contentSnippet)]))])));},cz);}));return l.Div(m.ofArray([cu]));})},Questions:{Client:{displayQuestions:function(cC,cD){var cE;cE=l.UL(m.ofArray([l.Attr().Class("list-group"),l.Id("questions-list")]));q.iter(function(cF){return cE.AppendI(cF);},q.map($.Tupled(function(cG){return I.li(cG[0],cG[1],cG[2],cG[3],cG[4]);}),cC));return cD.AppendI(cE);},li:function(cH,cI,cJ,cK,cL){var cM,cN;cM=m.ofArray([l.Text(cI)]);cN=m.ofArray([l.Text(cJ+", "+cK)]);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(cH),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Tags().NewTag("strong",cM)])),l.Br($.New(J,{$:0})),l.Tags().NewTag("small",cN),l.P(m.ofArray([l.Text(cL)]))]));},main:function(){var cO;cO=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(cP){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:8",[]),function(cR){if(cR.$==1){I.displayQuestions(cR.$0,cP);return g.Return(null);}else{return g.Return(null);}});}));},cO);return cO;}},Control:$.Class({get_Body:function(){return I.main();}})},Snippets:{Client:{dispalySnippets:function(cS,cT){var cU;cU=l.UL(m.ofArray([l.Attr().Class("list-group")]));q.iter(function(cV){return cU.AppendI(cV);},q.map($.Tupled(function(cW){return L.li(cW[0],cW[1],cW[2]);}),cS));return cT.AppendI(cU);},li:function(cX,cY,cZ){var c0;c0=m.ofArray([l.Text(cY)]);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(cX),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Tags().NewTag("strong",c0)])),l.P(m.ofArray([l.Text(cZ)]))]));},main:function(){var c1;c1=l.Div(m.ofArray([l.Attr().Class("home-widget")]));k.OnAfterRender(function(c2){return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:7",[]),function(c4){if(c4.$==1){L.dispalySnippets(c4.$0,c2);return g.Return(null);}else{return g.Return(null);}});}));},c1);return c1;}},Control:$.Class({get_Body:function(){return L.main();}})},StackOverflow:{Client:{hideProress:function(){if(w("[data-status=\"loading\"]").length===0){w("#progress-bar").slideUp();return w("[data-spy=\"scroll\"]").each(function(){return w(this).scrollspy.call(null,"refresh");});}else{return w("[data-spy=\"scroll\"]").each(function(){return w(this).scrollspy.call(null,"refresh");});}},main:function(){var c5;c5=l.Div(m.ofArray([x.Attr().NewAttr("data-"+"status","loading")]));k.OnAfterRender(function(c6){return g.Start(g.Delay(function(){var c8;c8=h.Async("Sitelet:5",[]);return g.Bind(c8,function(c9){t.iter(function(c_){return c6.AppendI(k.add(l.Div(m.ofArray([l.Attr().Class("row data-row")])),c_));},y.split(2,q.mapi(function(c$){return function(da){var db,dc,dd;db=c$%2===0?"col-md-5":"col-md-5 col-md-offset-1";dc=da.ownerLink;dd=da.ownerAvatar;return k.add(l.Div(m.ofArray([l.Attr().Class(db)])),m.ofArray([k.add(l.Div(m.ofArray([l.Attr().Class("media")])),m.ofArray([k.add(l.A(m.ofArray([l.Attr().Class("media-left"),l.Attr().NewAttr("href",dc),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Attr().NewAttr("src",dd),l.Attr().Class("avatar")]))])),k.add(l.Div(m.ofArray([l.Attr().Class("media-body")])),t.toList(t.delay(function(){var df;df=da.link;return t.append([k.add(l.H4(m.ofArray([l.Attr().Class("media-heading"),l.Attr().NewAttr("style","word-break: break-word;")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",df),l.Attr().NewAttr("target","_blank"),l.Text(da.title)]))]))],t.delay(function(){return t.append([l.P(m.ofArray([l.Text(da.creationDate)]))],t.delay(function(){return t.append([l.P(m.ofArray([l.Text("Score: "),l.Span(m.ofArray([l.Attr().Class("badge"),l.Text($$.String(da.score))])),l.Text(" Answers: "),l.Span(m.ofArray([l.Attr().Class("badge"),l.Text($$.String(da.answerCount))]))]))],t.delay(function(){return[l.Div(t.toList(t.delay(function(){return t.map(function(dk){return l.Span(m.ofArray([l.Attr().Class("label label-primary"),l.Text(dk)]));},da.tags);})))];}));}));}));})))]))]));};},c9)));c6["HtmlProvider@32"].RemoveAttribute(c6.Body,"data-status");N.hideProress();return g.Return(null);});}));},c5);return c5;}},Control:$.Class({get_Body:function(){return N.main();}})},Twitter:{Client:{hideProress:function(){if(w("[data-status=\"loading\"]").length===0){w("#progress-bar").slideUp();return w("[data-spy=\"scroll\"]").each(function(){return w(this).scrollspy.call(null,"refresh");});}else{return w("[data-spy=\"scroll\"]").each(function(){return w(this).scrollspy.call(null,"refresh");});}},main:function(){var dl;dl=l.Div(m.ofArray([x.Attr().NewAttr("data-"+"status","loading")]));k.OnAfterRender(function(dm){return g.Start(g.Delay(function(){var _do;_do=h.Async("Sitelet:6",[]);return g.Bind(_do,function(dp){t.iter(function(dq){return dm.AppendI(k.add(l.Div(m.ofArray([l.Attr().Class("row data-row")])),dq));},y.split(2,q.mapi(function(dr){return function(ds){var dt,du,dv,dw,dx,dy,dz,dA,dB,dC;dt=dr%2===0?"col-md-5":"col-md-5 col-md-offset-1";du=l.P($.New(J,{$:0}));du.set_Html(ds.statusAsHtml);dv=ds.isRetweeted?[ds.retweetedScreenName.$0,ds.retweetedId.$0]:[ds.screenName,ds.id];dw=dv[1];dx=dv[0];dy="https://twitter.com/"+ds.screenName;dz=ds.avatar;dA="https://twitter.com/"+ds.screenName;dC="https://twitter.com/"+dx+"/status/"+dw;dB=m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",dC),l.Attr().NewAttr("target","_blank"),l.Text(ds.createdAt)]))]);return k.add(l.Div(m.ofArray([l.Attr().Class(dt)])),m.ofArray([k.add(l.Div(m.ofArray([l.Attr().Class("media")])),m.ofArray([k.add(l.A(m.ofArray([l.Attr().Class("media-left"),l.Attr().NewAttr("href",dy),l.Attr().NewAttr("target","_blank")])),m.ofArray([l.Img(m.ofArray([l.Attr().NewAttr("src",dz),l.Attr().Class("avatar")]))])),k.add(l.Div(m.ofArray([l.Attr().Class("media-body")])),m.ofArray([k.add(l.H4(m.ofArray([l.Attr().Class("media-heading")])),m.ofArray([l.A(m.ofArray([l.Attr().NewAttr("href",dA),l.Attr().NewAttr("target","_blank"),l.Text(ds.screenName)])),l.Text(" "),l.Tags().NewTag("small",dB)])),du]))]))]));};},dp)));dm["HtmlProvider@32"].RemoveAttribute(dm.Body,"data-status");P.hideProress();return g.Return(null);});}));},dl);return dl;}},Control:$.Class({get_Body:function(){return P.main();}})},Utils:{skip:function(dD,dE){return t.skip(dE,dD);},split:function(dF,dG){var dH;dH=function(dI){return t.toList(t.delay(function(){return t.append([y.truncate(dI,dF)],t.delay(function(){return t.length(dI)<=dF?t.empty():dH(y.skip(dI,dF));}));}));};return dH(dG);},truncate:function(dL,dM){return t.truncate(dM,dL);}},VideosAdmin:{Client:{main:function(){var dN,dO,dP,dQ,dR,dS,dT,dU,dV,dW,dX,d3,d4;dN=c.Input("");dO=d.WithTextLabel("Title",dN);dP=c.Input("");dQ=d.WithTextLabel("URL",dP);dR=c.Input("");dS=d.WithTextLabel("Thumbnail",dR);dT=c.Input("");dU=d.WithTextLabel("Website",dT);dV=c.Input("");dW=d.WithTextLabel("Date",dV);dX=e.$(e.$(e.$(e.$(e.$(f.Return(function(dY){return function(dZ){return function(d0){return function(d1){return function(d2){return[dY,dZ,d0,d1,d2];};};};};}),dO),dQ),dS),dU),dW);d3=d.WithSubmitAndResetButtons(dX);d4=d.WithFormContainer(d3);return f.Run($.Tupled(function(d5){var d6,d7,d8,d9,d_;d6=d5[0];d7=d5[1];d8=d5[2];d9=d5[3];d_=d5[4];return g.Start(g.Delay(function(){return g.Bind(h.Async("Sitelet:0",[d6,d7,d8,d9,d_]),function(ea){if(ea){i("New video inserted successfully.");return g.Return(null);}else{i("The query failed.");return g.Return(null);}});}));}),d4);}},Control:$.Class({get_Body:function(){return R.main();}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Controls);d=$.Safe(b.Enhance);e=$.Safe(b.Data);f=$.Safe(b.Formlet);g=$.Safe(a.Concurrency);h=$.Safe(a.Remoting);i=$.Safe($$.alert);j=$.Safe(a.Html);k=$.Safe(j.Operators);l=$.Safe(j.Default);m=$.Safe(a.List);n=$.Safe($$.Website);o=$.Safe(n.BooksAdmin);p=$.Safe(o.Client);q=$.Safe(a.Arrays);r=$.Safe(n.GitHubGists);s=$.Safe(r.Client);t=$.Safe(a.Seq);u=$.Safe(n.GitHubIssues);v=$.Safe(u.Client);w=$.Safe($$.jQuery);x=$.Safe(l.HTML5);y=$.Safe(n.Utils);z=$.Safe(n.GitHubRepos);A=$.Safe(z.Client);B=$.Safe(n.Login);C=$.Safe(B.Client);D=$.Safe($$.window);E=$.Safe(j.EventsPervasives);F=$.Safe(n.News);G=$.Safe(a.OperatorIntrinsics);H=$.Safe(n.Questions);I=$.Safe(H.Client);J=$.Safe(m.T);K=$.Safe(n.Snippets);L=$.Safe(K.Client);M=$.Safe(n.StackOverflow);N=$.Safe(M.Client);O=$.Safe(n.Twitter);P=$.Safe(O.Client);Q=$.Safe(n.VideosAdmin);return R=$.Safe(Q.Client);});$.OnLoad(function(){F.main();C.passInput();p.addFormlet();return;});}());
