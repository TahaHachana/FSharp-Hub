(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G;$.Define($$,{Website:{BooksAdmin:{Client:{addFormlet:$.Field(function(){var H,I,J,L,M,N,P,Q,R,S,T,V,X,Z,_0,_1,_3,_4,_5,_7,_8,_9,ba,bb,bc,be,bf,bg,bi,bj,bk,bl,bu,bw;H=(I=c.Input(""),(J=function(K){return d.WithTextLabel("URL",K);},J(I)));L=(M=c.Input(""),(N=function(O){return d.WithTextLabel("Title",O);},N(M)));P=(Q=(R=(S=c.Input(""),(T=function(U){return d.WithTextLabel("Author",U);},T(S))),(V=function(W){return d.Many(W);},V(R))),(X=function(Y){return d.WithFormContainer(Y);},X(Q)));Z=(_0=c.Input(""),(_1=function(_2){return d.WithTextLabel("Publisher",_2);},_1(_0)));_3=(_4=c.Input(""),(_5=function(_6){return d.WithTextLabel("ISBN",_6);},_5(_4)));_7=(_8=c.Input(""),(_9=function(_){return d.WithTextLabel("Pages",_);},_9(_8)));ba=(bb=c.Input(""),(bc=function(bd){return d.WithTextLabel("Release Date",bd);},bc(bb)));be=(bf=c.Input(""),(bg=function(bh){return d.WithTextLabel("Cover URL",bh);},bg(bf)));bi=(bj=(bk=e.$(e.$(e.$(e.$(e.$(e.$(e.$(e.$((bl=function(bm){return function(bn){return function(bo){return function(bp){return function(bq){return function(br){return function(bs){return function(bt){return[bm,bn,bo,bp,bq,br,bs,bt];};};};};};};};},f.Return(bl)),H),L),P),Z),_3),_7),ba),be),(bu=function(bv){return d.WithSubmitAndResetButtons(bv);},bu(bk))),(bw=function(bx){return d.WithFormContainer(bx);},bw(bj)));return f.Run($.Tupled(function(bx){var by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bM;by=bx[0];bz=bx[1];bA=bx[2];bB=bx[3];bC=bx[4];bD=bx[5];bE=bx[6];bF=bx[7];bG=(bH=function(){var bJ,bK;bJ=g.Async("Website:2",[by,bz,bA,bB,bC,bD,bE,bF]);bK=function(bL){if(bL){h("New book inserted successfully.");return i.Return(null);}else{h("The query failed.");return i.Return(null);}};return i.Bind(bJ,bK);},i.Delay(bH));bM=function(bN){var bO;bO={$:0};return i.Start(bN);};return bM(bG);}),bi);}),main:function(){return k.add(l.Div(m.ofArray([l.Attr().Class("row")])),m.ofArray([l.Div(m.ofArray([l.H1(m.ofArray([l.Text("Add new book")])),l.Div(m.ofArray([p.addFormlet()]))]))]));},tr:function(bP,bQ){return l.TR(m.ofArray([l.TD(m.ofArray([l.Text(bP)])),l.TD(m.ofArray([l.Text(bQ)]))]));}},Control:$.Class({get_Body:function(){return p.main();}})},Login:{Client:{loginForm:function(bR){var bS,bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp;bS=l.Input(m.ofArray([l.Attr().Class("form-control"),(bT=l.Attr(),bT.NewAttr("id","username")),(bU=l.Attr(),bU.NewAttr("type","text")),(bV=q.Attr(),bV.NewAttr("autofocus","autofocus"))]));bW=(bX=(bY=l.Button(m.ofArray([l.Attr().Class("btn btn-primary btn-block"),(bZ=l.Attr(),bZ.NewAttr("id","login-btn")),(b0=l.Attr(),b0.NewAttr("type","button"))])),(b1=l.Text("Submit"),k.add(bY,m.ofArray([b1])))),(b2=(b3=function(){return function(){var b6,b7,cb;b6=(b7=function(){var b9,b_,b$;b9={Name:bS.get_Value(),Password:s.passInput().get_Value()};b_=g.Async("Website:6",[b9]);b$=function(ca){if(ca.$==1){t.location.assign(bR);return i.Return(null);}else{h("Login failed");return i.Return(null);}};return i.Bind(b_,b$);},i.Delay(b7));cb=function(cc){var cd;cd={$:0};return i.Start(cc);};return cb(b6);};},function(ce){return u.Events().OnClick(b3,ce);}),(b2(bX),bX)));return k.add(l.Form(m.ofArray([l.Attr().NewAttr("role","form"),(cf=l.Attr(),cf.NewAttr("id","signin"))])),m.ofArray([l.H2(m.ofArray([l.Text("Please sign in")])),k.add((cg=m.ofArray([l.Attr().Class("form-group")]),(ch=l.Tags(),ch.NewTag("fieldset",cg))),m.ofArray([(ci=m.ofArray([l.Text("Username"),(cj=l.Attr(),cj.NewAttr("for","username"))]),(ck=l.Tags(),ck.NewTag("label",ci))),bS,(cl=m.ofArray([l.Text("Password"),(cm=l.Attr(),cm.NewAttr("for","password"))]),(cn=l.Tags(),cn.NewTag("label",cl))),s.passInput()])),(co=m.ofArray([bW]),(cp=l.Tags(),cp.NewTag("fieldset",co)))]));},passInput:$.Field(function(){var cq,cr,cs,ct,cu;cq=l.Input(m.ofArray([l.Attr().Class("form-control"),(cr=l.Attr(),cr.NewAttr("id","password")),(cs=l.Attr(),cs.NewAttr("type","password"))]));ct=(cu=function(){return function(cw){var cx;cx=cw.KeyCode;if(cx===13){return v("#login-btn").click();}else{return null;}};},function(cy){return u.Events().OnKeyDown(cu,cy);});ct(cq);return cq;})},Control:$.Class({get_Body:function(){return s.loginForm(this.redirectUrl);}})},Questions:{Client:{displayQuestions:function(cz,cA){var cB,cC,cD,cL,cM;cB=l.UL(m.ofArray([l.Attr().Class("list-group"),l.Id("questions-list")]));cC=(cD=function(cE){return w.map($.Tupled(function(cF){var cG,cH,cI,cJ,cK;cG=cF[0];cH=cF[1];cI=cF[2];cJ=cF[3];cK=cF[4];return y.li(cG,cH,cI,cJ,cK);}),cE);},cD(cz));cL=(cM=function(cN){return cB.AppendI(cN);},function(cO){return w.iter(cM,cO);});cL(cC);return cA.AppendI(cB);},li:function(cP,cQ,cR,cS,cT){var cU,cV,cW,cX,cY;return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(cP)])),m.ofArray([(cU=m.ofArray([l.Text(cQ)]),(cV=l.Tags(),cV.NewTag("strong",cU)))])),l.Br($.New(z,{$:0})),(cW=m.ofArray([(cX=cR+", "+cS,l.Text(cX))]),(cY=l.Tags(),cY.NewTag("small",cW))),l.P(m.ofArray([l.Text(cT)]))]));},main:function(){var cZ,c0,c1;cZ=l.Div(m.ofArray([l.Attr().Class("home-widget")]));c0=(c1=function(c2){var c3,c4,c_;c3=(c4=function(){var c6,c7;c6=g.Async("Website:3",[]);c7=function(c8){var c9;if(c8.$==1){c9=c8.$0;y.displayQuestions(c9,c2);return i.Return(null);}else{return i.Return(null);}};return i.Bind(c6,c7);},i.Delay(c4));c_=function(c$){var da;da={$:0};return i.Start(c$);};return c_(c3);},function(db){return k.OnAfterRender(c1,db);});c0(cZ);return cZ;}},Control:$.Class({get_Body:function(){return y.main();}})},Snippets:{Client:{dispalySnippets:function(dc,dd){var de,df,dg,dm,dn;de=l.UL(m.ofArray([l.Attr().Class("list-group")]));df=(dg=function(dh){return w.map($.Tupled(function(di){var dj,dk,dl;dj=di[0];dk=di[1];dl=di[2];return B.li(dj,dk,dl);}),dh);},dg(dc));dm=(dn=function(_do){return de.AppendI(_do);},function(dp){return w.iter(dn,dp);});dm(df);return dd.AppendI(de);},li:function(dq,dr,ds){var dt,du;return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dq)])),m.ofArray([(dt=m.ofArray([l.Text(dr)]),(du=l.Tags(),du.NewTag("strong",dt)))])),l.P(m.ofArray([l.Text(ds)]))]));},main:function(){var dv,dw,dx;dv=l.Div(m.ofArray([l.Attr().Class("home-widget")]));dw=(dx=function(dy){var dz,dA,dG;dz=(dA=function(){var dC,dD;dC=g.Async("Website:5",[]);dD=function(dE){var dF;if(dE.$==1){dF=dE.$0;B.dispalySnippets(dF,dy);return i.Return(null);}else{return i.Return(null);}};return i.Bind(dC,dD);},i.Delay(dA));dG=function(dH){var dI;dI={$:0};return i.Start(dH);};return dG(dz);},function(dJ){return k.OnAfterRender(dx,dJ);});dw(dv);return dv;}},Control:$.Class({get_Body:function(){return B.main();}})},Tweets:{Client:{handleTweetActions:function(){var dK;dK=v("a.tweet-action");return dK.click(function(dL){var dM,dN,dO;dL.preventDefault();dM=this.getAttribute("href");dN=t.showModalDialog(dM);dO=function(dP){dP;};return dO(dN);});},li:function(dQ){var dR,dS,dT,dU,dV,dW,dX,dY,dZ,d0,d1,d2,d3,d4,d5,d6;dR=dQ.Id;dS=dQ.Name;dT=dQ.ScreenName;dU="https://twitter.com/"+dT;dV="https://twitter.com/intent/tweet?in_reply_to="+dR;dW="https://twitter.com/intent/retweet?tweet_id="+dR;dX="https://twitter.com/intent/favorite?tweet_id="+dR;dY=l.P($.New(z,{$:0}));dY.set_Html(dQ.Html);return k.add(l.LI(m.ofArray([l.Attr().Class("list-group-item")])),m.ofArray([l.Div(m.ofArray([k.add(k.add(l.A(m.ofArray([l.HRef(dU),l.Attr().Class("profile-link"),(dZ=l.Attr(),dZ.NewAttr("target","_blank"))])),m.ofArray([l.Img(m.ofArray([l.Src(dQ.Avatar),l.Alt(dS),l.Attr().Class("avatar")])),(d0=m.ofArray([l.Text(dS)]),(d1=l.Tags(),d1.NewTag("strong",d0)))])),m.ofArray([(d2=" @"+dT,l.Text(d2))])),l.Br($.New(z,{$:0})),(d3=m.ofArray([l.Text(dQ.Date)]),(d4=l.Tags(),d4.NewTag("small",d3))),dY,k.add(l.Div(m.ofArray([l.Attr().Class("tweet-actions")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dV),l.Attr().Class("tweet-action"),(d5=l.Attr(),d5.NewAttr("style","margin-right: 5px;"))])),m.ofArray([l.Text("Reply")])),k.add(l.A(m.ofArray([l.HRef(dW),l.Attr().Class("tweet-action"),(d6=l.Attr(),d6.NewAttr("style","margin-right: 5px;"))])),m.ofArray([l.Text("Retweet")])),k.add(l.A(m.ofArray([l.HRef(dX),l.Attr().Class("tweet-action")])),m.ofArray([l.Text("Favorite")]))]))]))]));},main:function(){var d7,d8,d9;d7=l.Div(m.ofArray([l.Attr().Class("home-widget")]));d8=(d9=function(d_){var d$,ea,em;d$=(ea=function(){var ec,ed;ec=g.Async("Website:4",[]);ed=function(ee){var ef,eg,eh,ei,ej;if(ee.$==1){ef=ee.$0;eg=l.UL(m.ofArray([l.Attr().Class("list-group"),(eh=l.Attr(),eh.NewAttr("id","tweets-ul"))]));ei=(ej=function(ek){return eg.AppendI(D.li(ek));},function(el){return E.iter(ej,el);});ei(ef);d_.AppendI(eg);D.toggleActionsVisibility();D.handleTweetActions();return i.Return(null);}else{h("Failed to fetch the latest tweets.");return i.Return(null);}};return i.Bind(ec,ed);},i.Delay(ea));em=function(en){var eo;eo={$:0};return i.Start(en);};return em(d$);},function(ep){return k.OnAfterRender(d9,ep);});d8(d7);return d7;},toggleActionsVisibility:function(){var eq;eq=v(".list-group-item");eq.mouseenter(function(){return v(".tweet-actions",this).css("visibility","visible");});return eq.mouseleave(function(){return v(".tweet-actions",this).css("visibility","hidden");});}},Control:$.Class({get_Body:function(){return D.main();}})},VideosAdmin:{Client:{main:function(){var et,eu,ev,ex,ey,ez,eB,eC,eD,eF,eG,eH,eJ,eK,eL,eN,eO,eP,eQ,eW,eY;et=(eu=c.Input(""),(ev=function(ew){return d.WithTextLabel("Title",ew);},ev(eu)));ex=(ey=c.Input(""),(ez=function(eA){return d.WithTextLabel("URL",eA);},ez(ey)));eB=(eC=c.Input(""),(eD=function(eE){return d.WithTextLabel("Thumbnail",eE);},eD(eC)));eF=(eG=c.Input(""),(eH=function(eI){return d.WithTextLabel("Website",eI);},eH(eG)));eJ=(eK=c.Input(""),(eL=function(eM){return d.WithTextLabel("Date",eM);},eL(eK)));eN=(eO=(eP=e.$(e.$(e.$(e.$(e.$((eQ=function(eR){return function(eS){return function(eT){return function(eU){return function(eV){return[eR,eS,eT,eU,eV];};};};};},f.Return(eQ)),et),ex),eB),eF),eJ),(eW=function(eX){return d.WithSubmitAndResetButtons(eX);},eW(eP))),(eY=function(eZ){return d.WithFormContainer(eZ);},eY(eO)));return f.Run($.Tupled(function(e0){var e1,e2,e3,e4,e5,e6,e7,fa;e1=e0[0];e2=e0[1];e3=e0[2];e4=e0[3];e5=e0[4];e6=(e7=function(){var e9,e_;e9=g.Async("Website:0",[e1,e2,e3,e4,e5]);e_=function(e$){if(e$){h("New video inserted successfully.");return i.Return(null);}else{h("The query failed.");return i.Return(null);}};return i.Bind(e9,e_);},i.Delay(e7));fa=function(fb){var fc;fc={$:0};return i.Start(fb);};return fa(e6);}),eN);}},Control:$.Class({get_Body:function(){return G.main();}})}}});$.OnInit(function(){a=$.Safe($$.IntelliFactory.WebSharper);b=$.Safe(a.Formlet);c=$.Safe(b.Controls);d=$.Safe(b.Enhance);e=$.Safe(b.Data);f=$.Safe(b.Formlet);g=$.Safe(a.Remoting);h=$.Safe($$.alert);i=$.Safe(a.Concurrency);j=$.Safe(a.Html);k=$.Safe(j.Operators);l=$.Safe(j.Default);m=$.Safe(a.List);n=$.Safe($$.Website);o=$.Safe(n.BooksAdmin);p=$.Safe(o.Client);q=$.Safe(l.HTML5);r=$.Safe(n.Login);s=$.Safe(r.Client);t=$.Safe($$.window);u=$.Safe(j.EventsPervasives);v=$.Safe($$.jQuery);w=$.Safe(a.Arrays);x=$.Safe(n.Questions);y=$.Safe(x.Client);z=$.Safe(m.T);A=$.Safe(n.Snippets);B=$.Safe(A.Client);C=$.Safe(n.Tweets);D=$.Safe(C.Client);E=$.Safe(a.Seq);F=$.Safe(n.VideosAdmin);return G=$.Safe(F.Client);});$.OnLoad(function(){s.passInput();p.addFormlet();});}());
