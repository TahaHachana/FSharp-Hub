(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;$.Define($$,{FSharpWebsite:{FSharpQuestions:{Client:{checkNewQuestions:function(){var s,t,V;s=(t=function(){var v,w,x,y;v=a("#fsharpQuestions");w=v.attr("data-question-id");x=c.Async("Website:2",[w]);y=function(z){var A,B,C,D,E,G,H,P,Q,T,U;if(z.$==1){A=z.$0[1];B=z.$0[0];C=(D=(E=function(F){return F.slice(0,F.length).reverse();},E(A)),(G=(H=$.Tupled(function(I){var J,K,L,M,N;J=I[0];K=I[1];L=I[2];M=I[3];N=I[4];return f.makeQuestionLi(J,K,L,M,N);}),function(O){return g.map(H,O);}),G(D)));P=(Q=function(R){return a("#questionsList").prepend(R.Body);},function(S){return g.iter(Q,S);});P(C);T=A.length;f.incrementQuestionsCount(T);f.setQuestionId(B);U=T===1?"1 new question":$$.String(T)+" new question";h.displayInfoAlert(U);return i.Return(null);}else{return i.Return(null);}};return i.Bind(x,y);},i.Delay(t));V=function(W){var X;X={$:0};return i.Start(W);};return V(s);},incrementQuestionsCount:function(Y){var Z,_0,_1,_2,_4,_5,_6;Z=a("#fsharpQuestions");_0=(_1=Z.attr("data-questions-count"),(_2=function(_3){return _3<<0;},_2(_1)));_4=(_5=Y+_0,(_6=function(_7){return $$.String(_7);},_6(_5)));return Z.attr("data-questions-count",_4);},makeQuestionLi:function(_8,_9,_,ba,bb){var bc,bd,be,bf,bg,bh;return k.add(l.LI(m.ofArray([l.Attr().Class("question")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(_8),(bc=l.Attr(),bc.NewAttr("target","_blank"))])),m.ofArray([(bd=m.ofArray([l.Text(_9)]),(be=l.Tags(),be.NewTag("strong",bd)))])),(bf=m.ofArray([(bg=" ("+_+", "+ba+")",l.Text(bg))]),(bh=l.Tags(),bh.NewTag("small",bf))),l.P(m.ofArray([l.Text(bb)]))]));},questionsDiv:function(){var bh,bj,bl,bm,bn,bo,bp,b3,b4,b5;bh=n(function(bi){bi;return f.checkNewQuestions();},300000);bj=function(bk){bk;};bj(bh);bl=l.UL(m.ofArray([l.Id("questionsList")]));bm=(bn=l.Button(m.ofArray([l.Text("Load More"),l.Attr().Class("btn loadMore")])),(bo=(bp=function(bq){return function(){var bs,bt,bZ;bs=(bt=function(){var bv,bw,bz,bA,bB,bC,bE,bF;bv=bq["HtmlProvider@32"];((bw=bq.Body,function(bx){return function(by){return bv.SetAttribute(bw,bx,by);};})("disabled"))("disabled");bz=a("#fsharpQuestions");bA=(bB=bz.attr("data-questions-count"),(bC=function(bD){return bD<<0;},bC(bB)));bE=c.Async("Website:1",[bA]);bF=function(bG){var bH,bI,bJ,bR,bS,bV,bW,bX;bH=(bI=(bJ=$.Tupled(function(bK){var bL,bM,bN,bO,bP;bL=bK[0];bM=bK[1];bN=bK[2];bO=bK[3];bP=bK[4];return f.makeQuestionLi(bL,bM,bN,bO,bP);}),function(bQ){return g.map(bJ,bQ);}),bI(bG));bR=(bS=function(bT){return bl.AppendI(bT);},function(bU){return g.iter(bS,bU);});bR(bH);bV=bG.length;f.incrementQuestionsCount(bV);bW=bq["HtmlProvider@32"];(bX=bq.Body,function(bY){return bW.RemoveAttribute(bX,bY);})("disabled");return i.Return(null);};return i.Bind(bE,bF);},i.Delay(bt));bZ=function(b0){var b1;b1={$:0};return i.Start(b0);};return bZ(bs);};},function(b2){return o.Events().OnClick(bp,b2);}),(bo(bn),bn)));b3=k.add(l.Div(m.ofArray([l.Id("questionsDiv")])),m.ofArray([bl,bm]));b4=(b5=function(){var b7,b8,cv;b7=(b8=function(){var b_,b$;b_=c.Async("Website:0",[]);b$=$.Tupled(function(ca){var cb,cc,cd,ce,cf,cn,co,cr,cs;cb=ca[0];cc=ca[1];cd=(ce=(cf=$.Tupled(function(cg){var ch,ci,cj,ck,cl;ch=cg[0];ci=cg[1];cj=cg[2];ck=cg[3];cl=cg[4];return f.makeQuestionLi(ch,ci,cj,ck,cl);}),function(cm){return g.map(cf,cm);}),ce(cc));cn=(co=function(cp){return bl.AppendI(cp);},function(cq){return g.iter(co,cq);});cn(cd);f.incrementQuestionsCount(20);f.setQuestionId(cb);cr=bm["HtmlProvider@32"];((cs=bm.Body,function(ct){return function(cu){return cr.SetCss(cs,ct,cu);};})("visibility"))("visible");return i.Return(null);});return i.Bind(b_,b$);},i.Delay(b8));cv=function(cw){var cx;cx={$:0};return i.Start(cw);};return cv(b7);},function(cy){return k.OnAfterRender(b5,cy);});b4(b3);return b3;},setQuestionId:function(cz){return a("#fsharpQuestions").attr("data-question-id",cz);}},FsharpQuestionsViewer:$.Class({get_Body:function(){return f.questionsDiv();}})},FSharpTweets:{Client:{checkNewTweets:function(){var cA,cB,db;cA=(cB=function(){var cD,cE,cF,cG;cD=a("#fsharpTweets");cE=cD.attr("data-tweet-id");cF=c.Async("Website:5",[cE]);cG=function(cH){var cI,cJ,cK,cL,cT,cU,cV,cX,cY,c7,c8,c$,da;if(cH.$==1){cI=cH.$0;cJ=(cK=cI[0],(cL=$.Tupled(function(cM){var cN,cO,cP,cQ,cR,cS;cN=cM[0];cO=cM[1];cP=cM[2];cQ=cM[3];cR=cM[4];cS=cM[5];return cO;}),cL(cK)));cT=(cU=(cV=function(cW){return cW.slice(0,cW.length).reverse();},cV(cI)),(cX=(cY=$.Tupled(function(cZ){var c0,c1,c2,c3,c4,c5;c0=cZ[0];c1=cZ[1];c2=cZ[2];c3=cZ[3];c4=cZ[4];c5=cZ[5];return q.makeTweetLi(c0,c1,c2,c3,c4,c5);}),function(c6){return g.map(cY,c6);}),cX(cU)));c7=(c8=function(c9){return a("#tweetsList").prepend(c9.Body);},function(c_){return g.iter(c8,c_);});c7(cT);c$=cI.length;q.incrementTweetsCount(c$);q.setTweetId(cJ);q.toggleActionsVisibility();da=c$===1?"1 new tweet":$$.String(c$)+" new tweets";h.displayInfoAlert(da);return i.Return(null);}else{return i.Return(null);}};return i.Bind(cF,cG);},i.Delay(cB));db=function(dc){var dd;dd={$:0};return i.Start(dc);};return db(cA);},incrementTweetsCount:function(de){var df,dg,dh,di,dk,dl,dm;df=a("#fsharpTweets");dg=(dh=df.attr("data-tweets-count"),(di=function(dj){return dj<<0;},di(dh)));dk=(dl=de+dg,(dm=function(dn){return $$.String(dn);},dm(dl)));return df.attr("data-tweets-count",dk);},makeTweetLi:function(_do,dp,dq,dr,ds,dt){var du,dv,dw,dx,dy,dz,dA,dB,dC,dD,dE,dF,dG,dH;du="https://twitter.com/"+_do;dv="https://twitter.com/intent/tweet?in_reply_to="+dp;dw="https://twitter.com/intent/retweet?tweet_id="+dp;dx="https://twitter.com/intent/retweet?tweet_id="+dp;dy=l.P($.New(r,{$:0}));dy.set_Html(ds);return k.add(l.LI(m.ofArray([l.Attr().Class("tweet")])),m.ofArray([k.add(k.add(l.A(m.ofArray([l.HRef(du),l.Attr().Class("twitterProfileLink"),(dz=l.Attr(),dz.NewAttr("target","_blank"))])),m.ofArray([l.Img(m.ofArray([l.Src(dq),l.Alt(dr),l.Attr().Class("avatar"),l.Height("48"),l.Width("48")])),(dA=m.ofArray([l.Text(dr)]),(dB=l.Tags(),dB.NewTag("strong",dA)))])),m.ofArray([l.Text(" @"+_do)])),k.add((dC=m.ofArray([l.Attr().Class("pull-right")]),(dD=l.Tags(),dD.NewTag("small",dC))),m.ofArray([(dE="("+dt+")",l.Text(dE))])),dy,k.add(l.Div(m.ofArray([l.Attr().Class("pull-right")])),m.ofArray([k.add(l.UL(m.ofArray([l.Attr().Class("tweetActions")])),m.ofArray([k.add(l.LI(m.ofArray([l.Attr().Class("tweetAction")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dv),(dF=l.Attr(),dF.NewAttr("target","_blank"))])),m.ofArray([l.Text("Reply")]))])),k.add(l.LI(m.ofArray([l.Attr().Class("tweetAction")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dw),(dG=l.Attr(),dG.NewAttr("target","_blank"))])),m.ofArray([l.Text("Retweet")]))])),k.add(l.LI(m.ofArray([l.Attr().Class("tweetAction")])),m.ofArray([k.add(l.A(m.ofArray([l.HRef(dx),(dH=l.Attr(),dH.NewAttr("target","_blank"))])),m.ofArray([l.Text("Favorite")]))]))]))]))]));},setTweetId:function(dI){return a("#fsharpTweets").attr("data-tweet-id",dI);},toggleActionsVisibility:function(){var dJ;dJ=a(".tweet");dJ.mouseenter(function(){return a(".tweetActions",this).css("visibility","visible");});return dJ.mouseleave(function(){return a(".tweetActions",this).css("visibility","hidden");});},tweetsDiv:function(){var dM,dN,dP,dR,dS,dT,dU,ex,ey,ez;dM=l.UL(m.ofArray([l.Id("tweetsList")]));dN=n(function(dO){dO;return q.checkNewTweets();},300000);dP=function(dQ){dQ;};dP(dN);dR=(dS=l.Button(m.ofArray([l.Text("Load More"),l.Attr().Class("btn loadMore")])),(dT=(dU=function(dV){return function(){var dX,dY,et;dX=(dY=function(){var d0,d1,d4,d5,d6,d7,d9,d_;d0=dV["HtmlProvider@32"];((d1=dV.Body,function(d2){return function(d3){return d0.SetAttribute(d1,d2,d3);};})("disabled"))("disabled");d4=a("#fsharpTweets");d5=(d6=d4.attr("data-tweets-count"),(d7=function(d8){return d8<<0;},d7(d6)));d9=c.Async("Website:4",[d5]);d_=function(d$){var ea,eb,ec,el,em,ep,eq,er;ea=(eb=(ec=$.Tupled(function(ed){var ee,ef,eg,eh,ei,ej;ee=ed[0];ef=ed[1];eg=ed[2];eh=ed[3];ei=ed[4];ej=ed[5];return q.makeTweetLi(ee,ef,eg,eh,ei,ej);}),function(ek){return g.map(ec,ek);}),eb(d$));el=(em=function(en){return dM.AppendI(en);},function(eo){return g.iter(em,eo);});el(ea);ep=d$.length;q.incrementTweetsCount(ep);q.toggleActionsVisibility();eq=dV["HtmlProvider@32"];(er=dV.Body,function(es){return eq.RemoveAttribute(er,es);})("disabled");return i.Return(null);};return i.Bind(d9,d_);},i.Delay(dY));et=function(eu){var ev;ev={$:0};return i.Start(eu);};return et(dX);};},function(ew){return o.Events().OnClick(dU,ew);}),(dT(dS),dS)));ex=k.add(l.Div(m.ofArray([l.Id("tweetsDiv")])),m.ofArray([dM,dR]));ey=(ez=function(){var eB,eC,e_;eB=(eC=function(){var eE,eF;eE=c.Async("Website:3",[]);eF=function(eG){var eH,eI,eJ,eR,eS,eT,e2,e3,e6,e7;eH=(eI=eG[0],(eJ=$.Tupled(function(eK){var eL,eM,eN,eO,eP,eQ;eL=eK[0];eM=eK[1];eN=eK[2];eO=eK[3];eP=eK[4];eQ=eK[5];return eM;}),eJ(eI)));eR=(eS=(eT=$.Tupled(function(eU){var eV,eW,eX,eY,eZ,e0;eV=eU[0];eW=eU[1];eX=eU[2];eY=eU[3];eZ=eU[4];e0=eU[5];return q.makeTweetLi(eV,eW,eX,eY,eZ,e0);}),function(e1){return g.map(eT,e1);}),eS(eG));e2=(e3=function(e4){return dM.AppendI(e4);},function(e5){return g.iter(e3,e5);});e2(eR);q.incrementTweetsCount(20);q.setTweetId(eH);e6=dR["HtmlProvider@32"];((e7=dR.Body,function(e8){return function(e9){return e6.SetCss(e7,e8,e9);};})("visibility"))("visible");q.toggleActionsVisibility();return i.Return(null);};return i.Bind(eE,eF);},i.Delay(eC));e_=function(e$){var fa;fa={$:0};return i.Start(e$);};return e_(eB);},function(fb){return k.OnAfterRender(ez,fb);});ey(ex);return ex;}},FsharpTweetsViewer:$.Class({get_Body:function(){return q.tweetsDiv();}})},Utilities:{displayInfoAlert:function(fc){a("#alertText").text(fc);a("#alertDiv").show(600);return a("#alertDiv").fadeOut(7000);}}}});$.OnInit(function(){a=$.Safe($$.jQuery);b=$.Safe($$.IntelliFactory.WebSharper);c=$.Safe(b.Remoting);d=$.Safe($$.FSharpWebsite);e=$.Safe(d.FSharpQuestions);f=$.Safe(e.Client);g=$.Safe(b.Arrays);h=$.Safe(d.Utilities);i=$.Safe(b.Concurrency);j=$.Safe(b.Html);k=$.Safe(j.Operators);l=$.Safe(j.Default);m=$.Safe(b.List);n=$.Safe($$.setInterval);o=$.Safe(j.EventsPervasives);p=$.Safe(d.FSharpTweets);q=$.Safe(p.Client);return r=$.Safe(m.T);});$.OnLoad(function(){});}());
